{"remainingRequest":"/home/alya/project/Pathfinding/node_modules/babel-loader/lib/index.js!/home/alya/project/Pathfinding/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alya/project/Pathfinding/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alya/project/Pathfinding/src/components/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alya/project/Pathfinding/src/components/Index.vue","mtime":1680303774140},{"path":"/home/alya/project/Pathfinding/node_modules/cache-loader/dist/cjs.js","mtime":1676881085187},{"path":"/home/alya/project/Pathfinding/node_modules/babel-loader/lib/index.js","mtime":1676881153360},{"path":"/home/alya/project/Pathfinding/node_modules/cache-loader/dist/cjs.js","mtime":1676881085187},{"path":"/home/alya/project/Pathfinding/node_modules/vue-loader/lib/index.js","mtime":1676881168702},{"path":"/home/alya/project/Pathfinding/node_modules/cache-loader/dist/cjs.js","mtime":1676881085187},{"path":"/home/alya/project/Pathfinding/node_modules/babel-loader/lib/index.js","mtime":1676881153360},{"path":"/home/alya/project/Pathfinding/node_modules/cache-loader/dist/cjs.js","mtime":1676881085187},{"path":"/home/alya/project/Pathfinding/node_modules/vue-loader/lib/index.js","mtime":1676881168702}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTGF5ZXIgfSBmcm9tICd2dWUta29udmEnOwppbXBvcnQgS29udmEgZnJvbSAia29udmEiOwppbXBvcnQgeyBiZnMgfSBmcm9tICcuLi9hbGdvcml0aG1zL2JyZWFkdGhGaXJzdFNlYXJjaCc7CmltcG9ydCB7IGRmcyB9IGZyb20gJy4uL2FsZ29yaXRobXMvZGVwdGhGaXJzdFNlYXJjaCc7CmltcG9ydCB7IGdyZWVkeUJGUyB9IGZyb20gJy4uL2FsZ29yaXRobXMvZ3JlZWR5QmVzdEZpcnN0U2VhcmNoJzsKaW1wb3J0IHsgYXN0YXIgfSBmcm9tICcuLi9hbGdvcml0aG1zL2FzdGFyJzsKaW1wb3J0IHsgdW5pZm9ybUNvc3QgfSBmcm9tICcuLi9hbGdvcml0aG1zL3VuaWZvcm1Db3N0JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlOiBudWxsLAogICAgICBmaWxlQ29udGVudHM6IG51bGwsCiAgICAgIG9iamVjdFVybDogbnVsbCwKICAgICAgZ3JpZDogbnVsbCwKICAgICAgc3RhcnROb2RlOiBudWxsLAogICAgICBnb2FsTm9kZTogbnVsbCwKICAgICAgcHJldlN0YXJ0Tm9kZTogJycsCiAgICAgIHByZXZHb2FsTm9kZTogJycsCiAgICAgIG9wdGlvbnNTdGFydE5vZGU6IFtdLAogICAgICBsaXN0OiBbXSwKICAgICAgZWRnZXM6IFtdLAogICAgICBkaXN0YW5jZXM6IFtdLAogICAgICBjb25uZWN0aW9uOiBmYWxzZSwKICAgICAgdmVydGV4OiBmYWxzZSwKICAgICAgY29ubmVjdGlvbnM6IFtdLAogICAgICBkcmF3aW5nTGluZTogZmFsc2UsCiAgICAgIHJ1bm5hYmxlR3JhcGg6IGZhbHNlLAogICAgICBzZWxlY3RlZEl0ZW06ICJBbGdvcml0aG1zIiwKICAgICAgY29vcjogIiIsCiAgICAgIHN0YWdlU2l6ZTogewogICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgaGVpZ2h0OiAyMDAKICAgICAgfSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdGhlU3RhZ2U6IFtdLAogICAgICAvL3RoaXMgaXMgZm9yIHRoZSBhbmltYXRpb24gc28gbm8gbmVlZCB0byBpbXBvcnQgaXQKICAgICAgY2FudFBsYXlQcmV2OiB0cnVlLAogICAgICBjYW50UGxheU5leHQ6IHRydWUsCiAgICAgIGNhbnRydW5TaG9ydFBhdGg6IHRydWUsCiAgICAgIHZpc2l0ZWRDb3VudDogMCwKICAgICAgdmlzaXRlZE5vZGVzSW5PcmRlcjogbnVsbCwKICAgICAgY2FsY3VsYXRlZFBhdGg6IG51bGwsCiAgICAgIGxpc3ROb2Rlc0Zyb206IFtdLAogICAgICBsaXN0Tm9kZXNUbzogW10sCiAgICAgIG91dHB1dE5vZGVzRnJvbTogW10sCiAgICAgIG91dHB1dE5vZGVzVG86IFtdLAogICAgICBsYWJlbFJlc3VsdDogJ0RldGFpbHMnLAogICAgICBzdGFnZUNvbmZpZ1RyZWU6IHsKICAgICAgICB3aWR0aDogMzAwLAogICAgICAgIGhlaWdodDogNDUwCiAgICAgIH0sCiAgICAgIG5vZGVzOiBbCiAgICAgICAgLy8geyBpZDogMCwgbmFtZTogJ1Jvb3QnLCB4OiAxNTAsIHk6IDIwIH0sCiAgICAgIF0sCiAgICAgIGFycm93czogW10KICAgICAgLy8gbm9kZXM6IFsKICAgICAgLy8gICB7IGlkOiAxLCBuYW1lOiAnUm9vdCcsIHg6IDE1MCwgeTogMjAgfSwKICAgICAgLy8gICB7IGlkOiAyLCBuYW1lOiAnQ2hpbGQgMScsIHg6IDU1LCB5OiA3MCB9LAogICAgICAvLyAgIHsgaWQ6IDMsIG5hbWU6ICdDaGlsZCAyJywgeDogMTEwICAsIHk6IDcwfSwKICAgICAgLy8gICB7IGlkOiA0LCBuYW1lOiAnQ2hpbGQgMicsIHg6IDE2NSAsIHk6IDcwIH0sCiAgICAgIC8vICAgeyBpZDogNSwgbmFtZTogJ0NoaWxkIDInLCB4OiAyMjAgLCB5OiA3MCB9LAogICAgICAvLyAgIHsgaWQ6IDYsIG5hbWU6ICdncmFuZGNoaWxkIDEnLCB4OiA0MCwgeTogMTIwIH0sCiAgICAgIC8vICAgeyBpZDogNywgbmFtZTogJ2dyYW5kY2hpbGQgMicsIHg6IDgwICAsIHk6IDEyMH0sCiAgICAgIC8vICAgeyBpZDogOCwgbmFtZTogJ2dyYW5kY2hpbGQgMicsIHg6IDEyMCAsIHk6IDEyMCB9LAogICAgICAvLyAgIHsgaWQ6IDksIG5hbWU6ICdncmFuZGNoaWxkIDInLCB4OiAxNjAgLCB5OiAxMjAgfQogICAgICAvLyBdLAogICAgICAvLyBhcnJvd3M6WwogICAgICAvLyAgIHsgaWQ6IDEsIHBvaW50MTogMCAsIHBvaW50MjogMn0sCiAgICAgIC8vICAgeyBpZDogMiwgcG9pbnQxOiAwICwgcG9pbnQyOiAzfSwKICAgICAgLy8gICB7IGlkOiAzLCBwb2ludDE6IDAgLCBwb2ludDI6IDR9LAogICAgICAvLyBdCiAgICB9OwogIH0sCgogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaW5pdGlhbGl6ZUdyaWQoKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICBsZXQgYXJyID0gW107CiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTI7IGorKykgewogICAgICAgIGlmIChpID09IDAgJiYgaiAhPSAwKSB7CiAgICAgICAgICBhcnJbal0gPSBqIC0gMTsKICAgICAgICB9IGVsc2UgaWYgKGogPT0gMCAmJiBpICE9IDApIHsKICAgICAgICAgIGFycltqXSA9IGkgLSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhcnJbal0gPSAiMCI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goYXJyKTsKICAgIH0KICAgIGNvbnNvbGUubG9nKHRoaXMudGFibGVEYXRhKTsKICAgIC8vICBmb3IgKGxldCBpID0gMDsgaSA8IDIyOyBpKyspIHsKICAgIC8vICAgICAgIC8vIENyZWF0ZSBhIG5ldyByb3cKICAgIC8vICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAvLyAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDIyOyBqKyspIHsKICAgIC8vICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGNlbGwgYW5kIGFkZCBpdCB0byB0aGUgcm93CiAgICAvLyAgICAgICAgICBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgIC8vICAgICAgICAgaWYoaT09MCAmJiBqIT0wKXsKICAgIC8vICAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gai0xOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIGVsc2UgaWYoaj09MCAmJiBpIT0wICl7CiAgICAvLyAgICAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9IGktMTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBlbHNlewogICAgLy8gICAgICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAiMCI7CiAgICAvLyAgICAgICAgIH0KCiAgICAvLyAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIC8vIEFkZCB0aGUgcm93IHRvIHRoZSB0YWJsZQogICAgLy8gICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hdHJpeCcpLmFwcGVuZENoaWxkKHJvdyk7CiAgICAvLyAgIH0KICB9LAoKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAvL0ZvciBEeW5hbWljIFN0YWdlIFNpemUKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5kcmF3QXJlYSIpOwogICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gewogICAgICB0aGlzLnN0YWdlU2l6ZS53aWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDsKICAgICAgdGhpcy5zdGFnZVNpemUuaGVpZ2h0ID0gY29udGFpbmVyLm9mZnNldEhlaWdodDsKICAgIH0pOwogICAgb2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG9wdGlvbnNHb2FsTm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1N0YXJ0Tm9kZS5maWx0ZXIobm9kZSA9PiB7CiAgICAgICAgcmV0dXJuIG5vZGUgIT09IHRoaXMuc3RhcnROb2RlOwogICAgICB9KTsKICAgIH0KICAgIC8vIGNlbGxIYXNWYWx1ZSgpewogICAgLy8gICAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInRkIik7IC8vIEdldCBhbGwgdGFibGUgY2VsbHMKICAgIC8vICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2VsbHMpLnNvbWUoY2VsbCA9PiBjZWxsLnRleHRDb250ZW50LnRyaW0oKSA9PSAwICk7CiAgICAvLyB9CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8gaGFuZGxlRHJhZ0VuZCgpewogICAgLy8gICBjb25zb2xlLmxvZygiaGFuZGxlIERyYWcgRW5kIHdvcmtzIikKICAgIC8vIH0sCiAgICBoYW5kbGVEcmFnTW92ZShlKSB7CiAgICAgIGNvbnN0IG9uRWxsaXBzZSA9IGUudGFyZ2V0IGluc3RhbmNlb2YgS29udmEuR3JvdXA7CiAgICAgIGlmICghb25FbGxpcHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBpZCA9IHBhcnNlSW50KGUudGFyZ2V0LmlkKCkuc3BsaXQoJy0nKS5wb3AoKSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubm9kZXNbaWRdKTsKICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpOwogICAgICB2YXIgc2hhcGUgPSBzdGFnZS5maW5kT25lKCcjY2lyY2xlVHJlZS0nICsgaWQpOwogICAgICB0aGlzLm5vZGVzW2lkXS54ID0gZS50YXJnZXQueCgpOwogICAgICB0aGlzLm5vZGVzW2lkXS55ID0gZS50YXJnZXQueSgpOwogICAgICAvLyB2YXIgYXJyID0gc3RhZ2UuZmluZE9uZSgnI2Fyci0nKzEpOwogICAgICAvLyAgY29uc29sZS5sb2coYXJyKQogICAgICBjb25zb2xlLmxvZyh0aGlzLm5vZGVzW2lkXS54KTsKICAgICAgY29uc29sZS5sb2codGhpcy5ub2Rlc1tpZF0ueSk7CiAgICAgIGNvbnNvbGUubG9nKHNoYXBlLngoKSk7CiAgICAgIGNvbnNvbGUubG9nKHNoYXBlLnkoKSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKG9uRWxsaXBzZS54KCkpCiAgICAgIC8vIGNvbnNvbGUubG9nKHNoYXBlLngoZS50YXJnZXQueCgpKSkKICAgICAgLy8gdGhpcy4kcmVmcy5sYXllclRyZWUuYmF0Y2hEcmF3KCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldEFic29sdXRlUG9zaXRpb24oKS54LyBzdGFnZS53aWR0aCgpKQogICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRBYnNvbHV0ZVBvc2l0aW9uKCkueS8gc3RhZ2UuaGVpZ2h0KCkpCiAgICAgIC8vIGNvbnNvbGUubG9nKCJ4IitlLnRhcmdldC54KCkpCiAgICAgIGUudGFyZ2V0LmdldExheWVyKCkuYmF0Y2hEcmF3KCk7CiAgICAgIC8vIGZvcihsZXQgaT0wOyBpPHRoaXMuYXJyb3dzLmxlbmd0aDtpKyspewogICAgICAvLyAgIGlmKHRoaXMuYXJyb3dzW2ldLnBvaW50MSA9PT0gZS50YXJnZXQuaWQoKSl7CgogICAgICAvLyAgIH0KCiAgICAgIC8vIH0KICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQueCgpKQogICAgfSwKCiAgICBvbmNsaWNrRHJvcChvcHRpb24pIHsKICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBvcHRpb247CiAgICAgIGNvbnNvbGUubG9nKCJvbmNoYW5nZSIpOwogICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHJpbSgpID09PSAiQkZTIikgewogICAgICAgIHRoaXMubGFiZWxSZXN1bHQgPSAiUXVldWUiOwogICAgICAgIGNvbnNvbGUubG9nKCJ0aGlzIHdvcmtzIGZvciBxdWV1ZSIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnRyaW0oKSA9PT0gIkRGUyIpIHsKICAgICAgICB0aGlzLmxhYmVsUmVzdWx0ID0gIlN0YWNrIjsKICAgICAgfQogICAgfSwKICAgIGFkZGluZ0Nvbm5lY3Rpb24oKSB7CiAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICF0aGlzLmNvbm5lY3Rpb247CiAgICAgIHRoaXMudmVydGV4ID0gZmFsc2U7CiAgICB9LAogICAgYWRkaW5nVmVydGV4KCkgewogICAgICB0aGlzLmNvbm5lY3Rpb24gPSBmYWxzZTsKICAgICAgdGhpcy52ZXJ0ZXggPSAhdGhpcy52ZXJ0ZXg7CiAgICB9LAogICAgY2xlYXJTY3JlZW4oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ0aGlzIGNvdWxkIHdvcmsiKTsKICAgICAgdGhpcy5ncmlkID0gbnVsbDsKICAgICAgdGhpcy5zdGFydE5vZGUgPSBudWxsOwogICAgICB0aGlzLmdvYWxOb2RlID0gbnVsbDsKICAgICAgdGhpcy5wcmV2U3RhcnROb2RlID0gJyc7CiAgICAgIHRoaXMucHJldkdvYWxOb2RlID0gJyc7CiAgICAgIHRoaXMub3B0aW9uc1N0YXJ0Tm9kZSA9IFtdOwogICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgdGhpcy5lZGdlcyA9IFtdOwogICAgICB0aGlzLmRpc3RhbmNlcyA9IFtdOwogICAgICB0aGlzLmNvbm5lY3Rpb24gPSBmYWxzZTsKICAgICAgdGhpcy52ZXJ0ZXggPSBmYWxzZTsKICAgICAgdGhpcy5jb25uZWN0aW9ucyA9IFtdOwogICAgICB0aGlzLmRyYXdpbmdMaW5lID0gZmFsc2U7CiAgICAgIHRoaXMucnVubmFibGVHcmFwaCA9IGZhbHNlOwogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9ICJBbGdvcml0aG1zIjsKICAgICAgdGhpcy5jb29yID0gIiI7CiAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy4kcmVmcy5rb252YS5nZXRTdGFnZSgpOwogICAgICAvLyBDbGVhciB0aGUgc3RhZ2UgdG8gcmVtb3ZlIGFsbCBjaGlsZHJlbiBhbmQgcmVzZXQgcHJvcGVydGllcwogICAgICBzdGFnZS5jbGVhcigpOwoKICAgICAgLy8gdGhpcy50aGVTdGFnZS5jbGVhcigpOwogICAgICB0aGlzLnRoZVN0YWdlID0gW107CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIC8vIENsZWFyIHRoZSBmaWxlIHJlZmVyZW5jZQogICAgICB0aGlzLmZpbGUgPSBudWxsOwogICAgICAvLyBDbGVhciB0aGUgZmlsZSBjb250ZW50cwogICAgICB0aGlzLmZpbGVDb250ZW50cyA9IG51bGw7CiAgICAgIC8vIFJldm9rZSB0aGUgb2JqZWN0IFVSTAogICAgICBpZiAodGhpcy5vYmplY3RVcmwpIHsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMub2JqZWN0VXJsKTsKICAgICAgICB0aGlzLm9iamVjdFVybCA9IG51bGw7CiAgICAgIH0KICAgICAgdGhpcy5pbml0aWFsaXplR3JpZCgpOwogICAgfSwKICAgIG9uRmlsZVNlbGVjdGVkKGV2ZW50KSB7CiAgICAgIHRoaXMuZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgbGV0IHJlc3VsdDsKICAgICAgaWYgKCF0aGlzLmZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coInRoaXMgd29ya3MiKTsKICAgICAgdGhpcy5vYmplY3RVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZSk7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSBldmVudCA9PiB7CiAgICAgICAgY29uc29sZS5sb2coInJlYWRlcndvcmtzIik7CiAgICAgICAgdGhpcy5maWxlQ29udGVudHMgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UodGhpcy5maWxlQ29udGVudHMpOwogICAgICAgIHRoaXMuZ3JpZCA9IHJlc3VsdFsiZ3JpZCJdOwogICAgICAgIHRoaXMuc3RhcnROb2RlID0gcmVzdWx0WyJzdGFydE5vZGUiXTsKICAgICAgICB0aGlzLmdvYWxOb2RlID0gcmVzdWx0WyJnb2FsTm9kZSJdOwogICAgICAgIHRoaXMucHJldlN0YXJ0Tm9kZSA9IHJlc3VsdFsicHJldlN0YXJ0Tm9kZSJdOwogICAgICAgIHRoaXMucHJldkdvYWxOb2RlID0gcmVzdWx0WyJwcmV2R29hbE5vZGUiXTsKICAgICAgICB0aGlzLm9wdGlvbnNTdGFydE5vZGUgPSByZXN1bHRbIm9wdGlvbnNTdGFydE5vZGUiXTsKICAgICAgICB0aGlzLmxpc3QgPSByZXN1bHRbImxpc3QiXTsKICAgICAgICB0aGlzLmVkZ2VzID0gcmVzdWx0WyJlZGdlcyJdOwogICAgICAgIHRoaXMuZGlzdGFuY2VzID0gcmVzdWx0WyJkaXN0YW5jZXMiXTsKICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBmYWxzZTsKICAgICAgICB0aGlzLnZlcnRleCA9IHRydWU7CiAgICAgICAgdGhpcy5jb25uZWN0aW9ucyA9IHJlc3VsdFsiY29ubmVjdGlvbnMiXTsKICAgICAgICB0aGlzLmRyYXdpbmdMaW5lID0gcmVzdWx0WyJkcmF3aW5nTGluZSJdOwogICAgICAgIHRoaXMucnVubmFibGVHcmFwaCA9IHJlc3VsdFsicnVubmFibGVHcmFwaCJdOwogICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gcmVzdWx0WyJzZWxlY3RlZEl0ZW0iXTsKICAgICAgICB0aGlzLmNvb3IgPSByZXN1bHRbImNvb3IiXTsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3VsdFsidGFibGVEYXRhIl07CiAgICAgICAgdGhpcy50aGVTdGFnZSA9IEtvbnZhLk5vZGUuY3JlYXRlKHJlc3VsdFsidGhlU3RhZ2UiXSwgJ2RyYXdBcmVhJyk7CgogICAgICAgIC8vIHRoaXMudGhlU3RhZ2UgPW5ldyBLb252YS5TdGFnZShyZXN1bHRbInRoZVN0YWdlIl0sICdkcmF3QXJlYScpOwoKICAgICAgICAvLyBQZXJmb3JtIHlvdXIgZGVzaXJlZCBhY3Rpb24gd2l0aCB0aGUgZmlsZSBjb250ZW50cyBoZXJlCiAgICAgIH07CgogICAgICByZWFkZXIucmVhZEFzVGV4dCh0aGlzLmZpbGUpOwogICAgfSwKICAgIGhhbmRsZUNsaWNrKGV2dCkgewogICAgICBpZiAodGhpcy52ZXJ0ZXggJiYgdGhpcy5saXN0Lmxlbmd0aCA8IDIwKSB7CiAgICAgICAgY29uc29sZS5sb2coInRoaXMgd29ya3MgY2lyY2xlIik7CiAgICAgICAgdGhpcy5vcHRpb25zU3RhcnROb2RlLnB1c2godGhpcy5saXN0Lmxlbmd0aCk7CiAgICAgICAgY29uc3Qgc3RhZ2UgPSBldnQudGFyZ2V0LmdldFN0YWdlKCk7CiAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7CiAgICAgICAgdGhpcy5saXN0LnB1c2gocG9zKTsKICAgICAgICB0aGlzLnRoZVN0YWdlID0gc3RhZ2U7CiAgICAgICAgY29uc29sZS5sb2coImxpc3QiKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgICB9CiAgICB9LAogICAgY2hvb3NlRmlsZXMoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWxlVXBsb2FkIikuY2xpY2soKTsKICAgIH0sCiAgICBjaGFuZ2VDb2xvclN0YXJ0KCkgewogICAgICB2YXIgdHdlZW47CiAgICAgIHZhciBpZCA9ICIjY2lyY2xlIiArIHRoaXMuc3RhcnROb2RlOwogICAgICBjb25zb2xlLmxvZyhpZCk7CiAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy50aGVTdGFnZTsKICAgICAgaWYgKHR3ZWVuKSB7CiAgICAgICAgdHdlZW4uZGVzdHJveSgpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHN0YWdlKTsKICAgICAgdmFyIHNoYXBlID0gc3RhZ2UuZmluZE9uZShpZCk7CiAgICAgIGlmICh0aGlzLnByZXZTdGFydE5vZGUgIT09ICcnKSB7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5wcmV2U3RhcnROb2RlKTsKICAgICAgICB2YXIgcHJldlNoYXBlID0gc3RhZ2UuZmluZE9uZSh0aGlzLnByZXZTdGFydE5vZGUpOwogICAgICAgIHR3ZWVuID0gbmV3IEtvbnZhLlR3ZWVuKHsKICAgICAgICAgIG5vZGU6IHByZXZTaGFwZSwKICAgICAgICAgIGZpbGw6ICIjYTIwNDE3IiwKICAgICAgICAgIHN0cm9rZTogIiNhMjA0MTciCiAgICAgICAgfSkucGxheSgpOwogICAgICB9CiAgICAgIHR3ZWVuID0gbmV3IEtvbnZhLlR3ZWVuKHsKICAgICAgICBub2RlOiBzaGFwZSwKICAgICAgICBmaWxsOiAiIzJmOWM2ZSIsCiAgICAgICAgc3Ryb2tlOiAiIzJmOWM2ZSIKICAgICAgfSkucGxheSgpOwogICAgICB0aGlzLnByZXZTdGFydE5vZGUgPSBpZDsKICAgIH0sCiAgICBzYXZlZmlsZSgpIHsKICAgICAgbGV0IHJlc3VsdCA9IHsKICAgICAgICBncmlkOiB0aGlzLmdyaWQsCiAgICAgICAgc3RhcnROb2RlOiB0aGlzLnN0YXJ0Tm9kZSwKICAgICAgICBnb2FsTm9kZTogdGhpcy5nb2FsTm9kZSwKICAgICAgICBwcmV2U3RhcnROb2RlOiB0aGlzLnByZXZTdGFydE5vZGUsCiAgICAgICAgcHJldkdvYWxOb2RlOiB0aGlzLnByZXZHb2FsTm9kZSwKICAgICAgICBvcHRpb25zU3RhcnROb2RlOiB0aGlzLm9wdGlvbnNTdGFydE5vZGUsCiAgICAgICAgbGlzdDogdGhpcy5saXN0LAogICAgICAgIGVkZ2VzOiB0aGlzLmVkZ2VzLAogICAgICAgIGRpc3RhbmNlczogdGhpcy5kaXN0YW5jZXMsCiAgICAgICAgY29ubmVjdGlvbjogdGhpcy5jb25uZWN0aW9uLAogICAgICAgIHZlcnRleDogdGhpcy52ZXJ0ZXgsCiAgICAgICAgY29ubmVjdGlvbnM6IHRoaXMuY29ubmVjdGlvbnMsCiAgICAgICAgZHJhd2luZzogdGhpcy5kcmF3aW5nTGluZSwKICAgICAgICBydW5uYWJsZUdyYXBoOiB0aGlzLnJ1bm5hYmxlR3JhcGgsCiAgICAgICAgc2VsZWN0ZWRJdGVtOiB0aGlzLnNlbGVjdGVkSXRlbSwKICAgICAgICBjb29yOiB0aGlzLmNvb3IsCiAgICAgICAgdGhlU3RhZ2U6IHRoaXMudGhlU3RhZ2UsCiAgICAgICAgdGFibGVEYXRhOiB0aGlzLnRhYmxlRGF0YQogICAgICB9OwogICAgICBsZXQgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdCk7CiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsKICAgICAgICB0eXBlOiAndGV4dC9wbGFpbicKICAgICAgfSk7CiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICdUaGVHcmFwaC50eHQnKTsgLy8gUmVwbGFjZSB3aXRoIHlvdXIgb3duIGZpbGVuYW1lCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgY29uc3Qgc3RhZ2UgPSB0aGlzLiRyZWZzLmtvbnZhLiRzdGFnZTsgLy8gR2V0IHRoZSBLb252YSBzdGFnZSBpbnN0YW5jZQogICAgICBjb25zb2xlLmxvZyhzdGFnZSk7CiAgICB9LAogICAgY2hhbmdlQ29sb3JHb2FsKCkgewogICAgICB2YXIgdHdlZW47CiAgICAgIHZhciBpZCA9ICIjY2lyY2xlIiArIHRoaXMuZ29hbE5vZGU7CiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgY29uc3Qgc3RhZ2UgPSB0aGlzLnRoZVN0YWdlOwogICAgICB2YXIgc2hhcGUgPSBzdGFnZS5maW5kT25lKGlkKTsKICAgICAgaWYgKHR3ZWVuKSB7CiAgICAgICAgdHdlZW4uZGVzdHJveSgpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnByZXZHb2FsTm9kZSAhPT0gJycpIHsKICAgICAgICB2YXIgcHJldlNoYXBlID0gc3RhZ2UuZmluZE9uZSh0aGlzLnByZXZHb2FsTm9kZSk7CiAgICAgICAgdHdlZW4gPSBuZXcgS29udmEuVHdlZW4oewogICAgICAgICAgbm9kZTogcHJldlNoYXBlLAogICAgICAgICAgZmlsbDogIiNhMjA0MTciLAogICAgICAgICAgc3Ryb2tlOiAiI2EyMDQxNyIKICAgICAgICB9KS5wbGF5KCk7CiAgICAgIH0KICAgICAgdHdlZW4gPSBuZXcgS29udmEuVHdlZW4oewogICAgICAgIG5vZGU6IHNoYXBlLAogICAgICAgIGZpbGw6ICIjMDA0MDE5IiwKICAgICAgICBzdHJva2U6ICIjMDA0MDE5IgogICAgICB9KS5wbGF5KCk7CiAgICAgIHRoaXMucHJldkdvYWxOb2RlID0gaWQ7CiAgICB9LAogICAgaGFuZGxlTW91c2VEb3duKGUpIHsKICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbikgewogICAgICAgIGNvbnN0IG9uQ2lyY2xlID0gZS50YXJnZXQgaW5zdGFuY2VvZiBLb252YS5DaXJjbGU7CiAgICAgICAgY29uc29sZS5sb2cob25DaXJjbGUuaWQpOwogICAgICAgIGlmICghb25DaXJjbGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5kcmF3aW5nTGluZSA9IHRydWU7CiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKHsKICAgICAgICAgIGlkOiBEYXRlLm5vdygpLAogICAgICAgICAgcG9pbnRzOiBbZS50YXJnZXQueCgpLCBlLnRhcmdldC55KCldCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVNb3VzZU1vdmUoZSkgewogICAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7CiAgICAgICAgaWYgKCF0aGlzLmRyYXdpbmdMaW5lKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHBvcyA9IGUudGFyZ2V0LmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7CiAgICAgICAgY29uc3QgbGFzdExpbmUgPSB0aGlzLmNvbm5lY3Rpb25zW3RoaXMuY29ubmVjdGlvbnMubGVuZ3RoIC0gMV07CiAgICAgICAgbGFzdExpbmUucG9pbnRzID0gW2xhc3RMaW5lLnBvaW50c1swXSwgbGFzdExpbmUucG9pbnRzWzFdLCBwb3MueCwgcG9zLnldOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlTW91c2VVcChlKSB7CiAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb24pIHsKICAgICAgICBjb25zdCBvbkNpcmNsZSA9IGUudGFyZ2V0IGluc3RhbmNlb2YgS29udmEuQ2lyY2xlOwogICAgICAgIGlmICghb25DaXJjbGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5kcmF3aW5nTGluZSA9IGZhbHNlOwogICAgICAgIGNvbnN0IGxhc3RMaW5lID0gdGhpcy5jb25uZWN0aW9uc1t0aGlzLmNvbm5lY3Rpb25zLmxlbmd0aCAtIDFdOwogICAgICAgIGNvbnN0IGluZGV4T2ZQb2ludDEgPSB0aGlzLmxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChwb2ludCkgewogICAgICAgICAgcmV0dXJuIHBvaW50LnggPT09IGxhc3RMaW5lLnBvaW50c1swXSAmJiBwb2ludC55ID09PSBsYXN0TGluZS5wb2ludHNbMV07CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgaW5kZXhPZlBvaW50MiA9IHRoaXMubGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKHBvaW50KSB7CiAgICAgICAgICByZXR1cm4gcG9pbnQueCA9PT0gZS50YXJnZXQueCgpICYmIHBvaW50LnkgPT09IGUudGFyZ2V0LnkoKTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiUG9pbnQxID0gIiArIGluZGV4T2ZQb2ludDEgKyAiIFBvaW50MiA9ICIgKyBpbmRleE9mUG9pbnQyKTsKICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleE9mUG9pbnQxICsgMV1baW5kZXhPZlBvaW50MiArIDFdID0gMTsKICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleE9mUG9pbnQyICsgMV1baW5kZXhPZlBvaW50MSArIDFdID0gMTsKICAgICAgICB2YXIgZGlzdCA9IE1hdGguc3FydChNYXRoLnBvdyhlLnRhcmdldC54KCkgLSBsYXN0TGluZS5wb2ludHNbMF0sIDIpICsgTWF0aC5wb3coZS50YXJnZXQueSgpIC0gbGFzdExpbmUucG9pbnRzWzFdLCAyKSk7CiAgICAgICAgdGhpcy5kaXN0YW5jZXMucHVzaCh7CiAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgIGRpc3RhbmNlOiBkaXN0LnRvRml4ZWQoMiksCiAgICAgICAgICB4OiBNYXRoLm1pbihlLnRhcmdldC54KCksIGxhc3RMaW5lLnBvaW50c1swXSkgKyBNYXRoLmFicyhlLnRhcmdldC54KCkgLSBsYXN0TGluZS5wb2ludHNbMF0pIC8gMiArIDQsCiAgICAgICAgICB5OiBNYXRoLm1pbihlLnRhcmdldC55KCksIGxhc3RMaW5lLnBvaW50c1sxXSkgKyBNYXRoLmFicyhlLnRhcmdldC55KCkgLSBsYXN0TGluZS5wb2ludHNbMV0pIC8gMiArIDQKICAgICAgICB9KTsKICAgICAgICB0aGlzLmdyaWRbaW5kZXhPZlBvaW50MV1baW5kZXhPZlBvaW50Ml0gPSB0aGlzLmNyZWF0ZU5vZGUoaW5kZXhPZlBvaW50MSwgaW5kZXhPZlBvaW50MiwgZGlzdC50b0ZpeGVkKDIpKTsKICAgICAgICB0aGlzLmdyaWRbaW5kZXhPZlBvaW50Ml1baW5kZXhPZlBvaW50MV0gPSB0aGlzLmNyZWF0ZU5vZGUoaW5kZXhPZlBvaW50MiwgaW5kZXhPZlBvaW50MSwgZGlzdC50b0ZpeGVkKDIpKTsKICAgICAgICBjb25zb2xlLmxvZygiQ3JlYXRlZExpbmVzIik7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5ncmlkW2luZGV4T2ZQb2ludDFdW2luZGV4T2ZQb2ludDJdKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyaWRbaW5kZXhPZlBvaW50Ml1baW5kZXhPZlBvaW50MV0pOwogICAgICAgIGxhc3RMaW5lLmlkID0gImxpbmUiICsgaW5kZXhPZlBvaW50MSArIGluZGV4T2ZQb2ludDI7CiAgICAgICAgbGFzdExpbmUucG9pbnRzID0gW2xhc3RMaW5lLnBvaW50c1swXSwgbGFzdExpbmUucG9pbnRzWzFdLCBlLnRhcmdldC54KCksIGUudGFyZ2V0LnkoKV07CiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnMubGVuZ3RoIDwgMikgewogICAgICAgICAgdGhpcy5ydW5uYWJsZUdyYXBoID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coImFmdGVyIG1ha2luZyBsaW5lcyIpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ3JpZFtpbmRleE9mUG9pbnQxXVtpbmRleE9mUG9pbnQyXSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5ncmlkW2luZGV4T2ZQb2ludDJdW2luZGV4T2ZQb2ludDFdKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyaWQpOwogICAgICB9CiAgICB9LAogICAgbmV4dCgpIHsKICAgICAgaWYgKHRoaXMudmlzaXRlZENvdW50ICsgMSA8IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlci5sZW5ndGgpIHsKICAgICAgICB0aGlzLnZpc2l0ZWRDb3VudCArPSAxOwogICAgICAgIHRoaXMuY29sb3JOb2RlKHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlclt0aGlzLnZpc2l0ZWRDb3VudF0sICIjZWQ4MWM0Iik7CiAgICAgICAgY29uc29sZS5sb2coImRvaW5nIG5leHQiKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXJbdGhpcy52aXNpdGVkQ291bnRdKTsKCiAgICAgICAgLy9hZGRpbmcgc3RhY2sgdGFibGUKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0gPT09ICJCRlMiKSB7CiAgICAgICAgICBsZXQgaXRlbSA9IG51bGw7CiAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy52aXNpdGVkTm9kZXNJbk9yZGVyW3RoaXMudmlzaXRlZENvdW50XTsKICAgICAgICAgIC8vIGlmKHRoaXMubGlzdE5vZGVzVG8uaW5jbHVkZXMobm9kZS5wb2ludDEpKXsKICAgICAgICAgIC8vICAgaXRlbSA9IHRoaXMubGlzdE5vZGVzVG8uc2hpZnQoKTsKICAgICAgICAgIC8vICAgdGhpcy5vdXRwdXROb2Rlcy5wdXNoKGl0ZW0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgdGhpcy5saXN0Tm9kZXNGcm9tLnB1c2gobm9kZS5wb2ludDEpOwogICAgICAgICAgdGhpcy5saXN0Tm9kZXNUby5wdXNoKG5vZGUucG9pbnQyKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtID09PSAiREZTIikgewogICAgICAgICAgbGV0IGl0ZW0gPSBudWxsOwogICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlclt0aGlzLnZpc2l0ZWRDb3VudF07CiAgICAgICAgICAvLyBpZih0aGlzLmxpc3ROb2Rlc1RvLmluY2x1ZGVzKG5vZGUucG9pbnQxKSl7CiAgICAgICAgICAvLyAgIGl0ZW0gPSB0aGlzLmxpc3ROb2Rlc1RvLnNoaWZ0KCk7CiAgICAgICAgICAvLyAgIHRoaXMub3V0cHV0Tm9kZXMucHVzaChpdGVtKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIHRoaXMubGlzdE5vZGVzRnJvbS5wdXNoKG5vZGUucG9pbnQxKTsKICAgICAgICAgIHRoaXMubGlzdE5vZGVzVG8ucHVzaChub2RlLnBvaW50Mik7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSA9PT0gIlVuaWZvcm0gQ29zdCIpIHsKICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXJbdGhpcy52aXNpdGVkQ291bnRdOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0gPT0gIkEqIikgewogICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlclt0aGlzLnZpc2l0ZWRDb3VudF07CiAgICAgICAgICBjb25zdCBteVRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzdGFydGFibGUnKTsKICAgICAgICAgIC8vIEluc2VydCBhIG5ldyByb3cgYXQgdGhlIGVuZCBvZiB0aGUgdGFibGUKICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IG15VGFibGUuaW5zZXJ0Um93KCk7CgogICAgICAgICAgLy8gSW5zZXJ0IGNlbGxzIGludG8gdGhlIG5ldyByb3cKICAgICAgICAgIGNvbnN0IGNlbGwxID0gbmV3Um93Lmluc2VydENlbGwoKTsKICAgICAgICAgIGNvbnN0IGNlbGwyID0gbmV3Um93Lmluc2VydENlbGwoKTsKICAgICAgICAgIGNvbnN0IGNlbGwzID0gbmV3Um93Lmluc2VydENlbGwoKTsKICAgICAgICAgIGNvbnN0IGNlbGw0ID0gbmV3Um93Lmluc2VydENlbGwoKTsKCiAgICAgICAgICAvLyBTZXQgdGhlIGNvbnRlbnQgb2YgdGhlIGNlbGxzCiAgICAgICAgICBjZWxsMS50ZXh0Q29udGVudCA9IG5vZGUucG9pbnQyOwogICAgICAgICAgY2VsbDIudGV4dENvbnRlbnQgPSBub2RlLmNvc3QuSC50b0ZpeGVkKDIpOwogICAgICAgICAgY2VsbDMudGV4dENvbnRlbnQgPSBub2RlLmNvc3QuRy50b0ZpeGVkKDIpOwogICAgICAgICAgY2VsbDQudGV4dENvbnRlbnQgPSBub2RlLmNvc3QuRi50b0ZpeGVkKDIpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy52aXNpdGVkQ291bnQgPj0gMSkgdGhpcy5jYW50UGxheVByZXYgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMudmlzaXRlZENvdW50ID09IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlci5sZW5ndGggLSAxKSB7CiAgICAgICAgdGhpcy5jYW50UGxheU5leHQgPSB0cnVlOwogICAgICAgIHRoaXMuY2FudHJ1blNob3J0UGF0aCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcHJldigpIHsKICAgICAgaWYgKHRoaXMudmlzaXRlZENvdW50IC0gMSA+PSAwKSB7CiAgICAgICAgdGhpcy51bmRvQ29sb3JOb2RlKCk7CiAgICAgICAgdGhpcy52aXNpdGVkQ291bnQgLT0gMTsKICAgICAgICAvL2FkZGluZyBzdGFjayB0YWJsZQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSA9PT0gIkJGUyIpIHsKICAgICAgICAgIGxldCBpdGVtID0gbnVsbDsKICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXJbdGhpcy52aXNpdGVkQ291bnRdOwogICAgICAgICAgLy8gaWYodGhpcy5saXN0Tm9kZXNUby5pbmNsdWRlcyhub2RlLnBvaW50MSkpewogICAgICAgICAgLy8gICBpdGVtID0gdGhpcy5saXN0Tm9kZXNUby5zaGlmdCgpOwogICAgICAgICAgLy8gICB0aGlzLm91dHB1dE5vZGVzLnB1c2goaXRlbSk7CiAgICAgICAgICAvLyB9CiAgICAgICAgICB0aGlzLmxpc3ROb2Rlc0Zyb20ucG9wKG5vZGUucG9pbnQxKTsKICAgICAgICAgIHRoaXMubGlzdE5vZGVzVG8ucG9wKG5vZGUucG9pbnQyKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtID09PSAiREZTIikgewogICAgICAgICAgbGV0IGl0ZW0gPSBudWxsOwogICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlclt0aGlzLnZpc2l0ZWRDb3VudF07CiAgICAgICAgICAvLyBpZih0aGlzLmxpc3ROb2Rlc1RvLmluY2x1ZGVzKG5vZGUucG9pbnQxKSl7CiAgICAgICAgICAvLyAgIGl0ZW0gPSB0aGlzLmxpc3ROb2Rlc1RvLnNoaWZ0KCk7CiAgICAgICAgICAvLyAgIHRoaXMub3V0cHV0Tm9kZXMucG9wKGl0ZW0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgdGhpcy5saXN0Tm9kZXNGcm9tLnBvcChub2RlLnBvaW50MSk7CiAgICAgICAgICB0aGlzLmxpc3ROb2Rlc1RvLnBvcChub2RlLnBvaW50Mik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLnZpc2l0ZWRDb3VudCA9PSAwKSB0aGlzLmNhbnRQbGF5UHJldiA9IHRydWU7CiAgICAgIGlmICh0aGlzLnZpc2l0ZWRDb3VudCA8IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlci5sZW5ndGggLSAxKSB7CiAgICAgICAgdGhpcy5jYW50UGxheU5leHQgPSBmYWxzZTsKICAgICAgICB0aGlzLmNhbnRydW5TaG9ydFBhdGggPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlSGV1cmlzdGljKG5vZGUpIHsKICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMubGlzdC5sZW5ndGg7CiAgICAgIGNvbnN0IGVuZE5vZGUgPSB0aGlzLmxpc3Rbbm9kZV07CiAgICAgIGNvbnNvbGUubG9nKCJkb2luZyB0aGUgZW5kIG5vZGUiKTsKICAgICAgY29uc29sZS5sb2coZW5kTm9kZSk7CiAgICAgIGxldCBoZXVyaXN0aWMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgICAgICB2YXIgZGlzdCA9IE1hdGguc3FydChNYXRoLnBvdyhlbmROb2RlLnggLSB0aGlzLmxpc3RbaV0ueCwgMikgKyBNYXRoLnBvdyhlbmROb2RlLnkgLSB0aGlzLmxpc3RbaV0ueSwgMikpOwogICAgICAgIGhldXJpc3RpYy5wdXNoKHsKICAgICAgICAgIG5vZGU6IGksCiAgICAgICAgICBodmFsOiBkaXN0CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhldXJpc3RpYzsKICAgIH0sCiAgICBpbml0aWFsaXplR3JpZCgpIHsKICAgICAgY29uc3QgZ3JpZCA9IFtdOwogICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93KyspIHsKICAgICAgICBjb25zdCBjdXJyZW50Um93ID0gW107CiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCsrKSB7CiAgICAgICAgICBjdXJyZW50Um93LnB1c2godGhpcy5jcmVhdGVOb2RlKHJvdywgY29sLCAwKSk7CiAgICAgICAgfQogICAgICAgIGdyaWQucHVzaChjdXJyZW50Um93KTsKICAgICAgfQogICAgICB0aGlzLmdyaWQgPSBncmlkOwogICAgICBjb25zb2xlLmxvZygnVGhpcyBpcyB0aGUgSW5pdGlhbGl6ZWQgR3JpZCcpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmdyaWQpOwogICAgfSwKICAgIC8vCiAgICBjcmVhdGVOb2RlKHgsIHksIGRpc3QpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwb2ludDE6IHgsCiAgICAgICAgcG9pbnQyOiB5LAogICAgICAgIGRpc3RhbmNlOiBkaXN0LAogICAgICAgIGlzVmlzaXRlZDogZmFsc2UsCiAgICAgICAgcHJldmlvdXNOb2RlOiBudWxsLAogICAgICAgIGNvc3Q6IHsKICAgICAgICAgIEY6IEluZmluaXR5LAogICAgICAgICAgRzogSW5maW5pdHksCiAgICAgICAgICBIOiBJbmZpbml0eQogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBhbmltYXRlQWxnb3JpdGhtKHZpc2l0ZWROb2Rlc0luT3JkZXIsIG5vZGVzSW5TaG9ydGVzdFBhdGhPcmRlcikgewogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZpc2l0ZWROb2Rlc0luT3JkZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY29sb3JOb2RlKHZpc2l0ZWROb2Rlc0luT3JkZXJbaV0sICIjZWQ4MWM0Iik7CiAgICAgICAgfSwgaSAqIDgwMCk7CiAgICAgIH0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5hbmltYXRlU2hvcnRlc3RQYXRoKG5vZGVzSW5TaG9ydGVzdFBhdGhPcmRlcik7CiAgICAgIH0sIHZpc2l0ZWROb2Rlc0luT3JkZXIubGVuZ3RoICogODAwKTsKICAgIH0sCiAgICBjb2xvck5vZGUodmlzaXRlZE5vZGUsIGNvbG9yKSB7CiAgICAgIGxldCBzdGFnZSA9IHRoaXMudGhlU3RhZ2U7CiAgICAgIHZhciBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbnM7CiAgICAgIGNvbnN0IG5vZGUgPSB2aXNpdGVkTm9kZTsKICAgICAgdmFyIGlkQ2lyY2xlID0gIiNjaXJjbGUiICsgbm9kZS5wb2ludDI7CiAgICAgIGNvbnNvbGUubG9nKGlkQ2lyY2xlKTsKICAgICAgdmFyIHNoYXBlID0gc3RhZ2UuZmluZE9uZShpZENpcmNsZSk7CiAgICAgIHZhciBpZExpbmUgPSAibGluZSIgKyBub2RlLnBvaW50MSArIG5vZGUucG9pbnQyOwogICAgICB2YXIgaWRMaW5lMiA9ICJsaW5lIiArIG5vZGUucG9pbnQyICsgbm9kZS5wb2ludDE7CiAgICAgIGxldCBpZEwgPSBjb25uZWN0aW9ucy5maWx0ZXIobGluZSA9PiBsaW5lLmlkID09PSBpZExpbmUgfHwgbGluZS5pZCA9PT0gaWRMaW5lMik7CiAgICAgIHZhciBpZE9mTGluZSA9ICIjIiArIGlkTFswXS5pZDsKICAgICAgdmFyIGxpbmUgPSBzdGFnZS5maW5kT25lKGlkT2ZMaW5lKTsKICAgICAgdmFyIHR3ZWVuTGluZSA9IG5ldyBLb252YS5Ud2Vlbih7CiAgICAgICAgbm9kZTogbGluZSwKICAgICAgICBmaWxsOiBjb2xvciwKICAgICAgICBzdHJva2U6IGNvbG9yCiAgICAgIH0pLnBsYXkoKTsKICAgICAgY29uc29sZS5sb2coIkxpbmUgaXMgd29ya2luZyIpOwogICAgICB2YXIgdHdlZW5TaGFwZSA9IG5ldyBLb252YS5Ud2Vlbih7CiAgICAgICAgbm9kZTogc2hhcGUsCiAgICAgICAgZmlsbDogY29sb3IsCiAgICAgICAgc3Ryb2tlOiBjb2xvcgogICAgICB9KS5wbGF5KCk7CiAgICAgIGNvbnNvbGUubG9nKCJTaGFwZSBpcyB3b3JraW5nIik7CiAgICB9LAogICAgdW5kb0NvbG9yTm9kZShjb2xvcikgewogICAgICBsZXQgc3RhZ2UgPSB0aGlzLnRoZVN0YWdlOwoKICAgICAgLy8gbGV0IHByZXZOb2RlID0gdGhpcy52aXNpdGVkTm9kZXNJbk9yZGVyW3RoaXMudmlzaXRlZENvdW50LTFdCiAgICAgIGxldCB2aXNpdGVkTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzSW5PcmRlclt0aGlzLnZpc2l0ZWRDb3VudF07CiAgICAgIHZhciBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbnM7CiAgICAgIGNvbnN0IG5vZGUgPSB2aXNpdGVkTm9kZTsKICAgICAgdmFyIGlkQ2lyY2xlID0gIiNjaXJjbGUiICsgbm9kZS5wb2ludDI7CiAgICAgIGNvbnNvbGUubG9nKGlkQ2lyY2xlKTsKICAgICAgdmFyIHNoYXBlID0gc3RhZ2UuZmluZE9uZShpZENpcmNsZSk7CiAgICAgIHZhciBpZExpbmUgPSAibGluZSIgKyBub2RlLnBvaW50MSArIG5vZGUucG9pbnQyOwogICAgICB2YXIgaWRMaW5lMiA9ICJsaW5lIiArIG5vZGUucG9pbnQyICsgbm9kZS5wb2ludDE7CiAgICAgIGxldCBpZEwgPSBjb25uZWN0aW9ucy5maWx0ZXIobGluZSA9PiBsaW5lLmlkID09PSBpZExpbmUgfHwgbGluZS5pZCA9PT0gaWRMaW5lMik7CiAgICAgIHZhciBpZE9mTGluZSA9ICIjIiArIGlkTFswXS5pZDsKICAgICAgdmFyIGxpbmUgPSBzdGFnZS5maW5kT25lKGlkT2ZMaW5lKTsKICAgICAgdmFyIHR3ZWVuTGluZSA9IG5ldyBLb252YS5Ud2Vlbih7CiAgICAgICAgbm9kZTogbGluZSwKICAgICAgICBzdHJva2U6ICdibGFjaycKICAgICAgfSkucGxheSgpOwogICAgICBjb25zb2xlLmxvZygiTGluZSBpcyB3b3JraW5nIik7CiAgICAgIHZhciB0d2VlblNoYXBlID0gbmV3IEtvbnZhLlR3ZWVuKHsKICAgICAgICBub2RlOiBzaGFwZSwKICAgICAgICBmaWxsOiAnI2EyMDQxNycsCiAgICAgICAgLy9kcmFnZ2FibGU6dHJ1ZSwKICAgICAgICBzdHJva2U6ICcjYTIwNDE3JwogICAgICB9KS5wbGF5KCk7CiAgICAgIGNvbnNvbGUubG9nKCJTaGFwZSBpcyB3b3JraW5nIik7CiAgICB9LAogICAgYW5pbWF0ZVNob3J0ZXN0UGF0aChub2Rlc0luU2hvcnRlc3RQYXRoT3JkZXIpIHsKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBub2Rlc0luU2hvcnRlc3RQYXRoT3JkZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY29sb3JOb2RlKG5vZGVzSW5TaG9ydGVzdFBhdGhPcmRlcltpXSwgIiNlZDQyNTUiKTsKICAgICAgICB9LCBpICogNTAwKTsKICAgICAgfQogICAgfSwKICAgIGdldFBhdGgoKSB7CiAgICAgIHRoaXMuY2FudFBsYXlQcmV2ID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSA9PT0gIkJGUyIgfHwgdGhpcy5zZWxlY3RlZEl0ZW0gPT09ICJERlMiKSB7CiAgICAgICAgdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc1RhYmxlIik7CiAgICAgICAgLy8gR2V0IGFuIGFycmF5IG9mIGFsbCB0aGUgdGQgZWxlbWVudHMgaW4gdGhlIHRhYmxlCiAgICAgICAgdmFyIHRkcyA9IHRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOwogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmNhbGN1bGF0ZWRQYXRoLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7CiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmNhbGN1bGF0ZWRQYXRoW2ldOwogICAgICAgIHRoaXMub3V0cHV0Tm9kZXNGcm9tLnB1c2gobm9kZS5wb2ludDEpOwogICAgICAgIHRoaXMub3V0cHV0Tm9kZXNUby5wdXNoKG5vZGUucG9pbnQyKTsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0gPT09ICJCRlMiKSB7CiAgICAgICAgICBsZXQgcmVzSW5kZXggPSB0aGlzLmxpc3ROb2Rlc0Zyb20uaW5kZXhPZihub2RlLnBvaW50MSkgKyAxOwogICAgICAgICAgdGFibGUucm93c1swXS5jZWxsc1tyZXNJbmRleF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNlZDQyNTUiOwogICAgICAgICAgdGFibGUucm93c1sxXS5jZWxsc1tyZXNJbmRleF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNlZDQyNTUiOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0gPT09ICJERlMiKSB7CiAgICAgICAgICBsZXQgcmVzSW5kZXggPSB0aGlzLmxpc3ROb2Rlc1RvLmluZGV4T2Yobm9kZS5wb2ludDIpICsgMTsKICAgICAgICAgIHRhYmxlLnJvd3NbMF0uY2VsbHNbcmVzSW5kZXhdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZWQ0MjU1IjsKICAgICAgICAgIHRhYmxlLnJvd3NbMV0uY2VsbHNbcmVzSW5kZXhdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZWQ0MjU1IjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2FsY3VsYXRlZFBhdGgubGVuZ3RoIC0gMTsgaSA+PSAxOyBpLS0pIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY29sb3JOb2RlKHRoaXMuY2FsY3VsYXRlZFBhdGhbaV0sICIjZWQ0MjU1Iik7CiAgICAgICAgfSwgaSAqIDUwMCk7CiAgICAgIH0KICAgIH0sCiAgICB2aXN1YWxpemVCRlMoKSB7CiAgICAgIGNvbnN0IFNUQVJUTk9ERSA9IHRoaXMuZ3JpZFt0aGlzLnN0YXJ0Tm9kZV1bdGhpcy5zdGFydE5vZGVdOwogICAgICBjb25zdCBHT0FMTk9ERSA9IHRoaXMuZ29hbE5vZGU7CiAgICAgIGNvbnN0IHNpemUgPSB0aGlzLmxpc3QubGVuZ3RoOwogICAgICByZXR1cm4gYmZzKHRoaXMuZ3JpZCwgU1RBUlROT0RFLCBHT0FMTk9ERSwgc2l6ZSk7CiAgICB9LAogICAgdmlzdWFsaXplREZTKCkgewogICAgICBjb25zdCBTVEFSVE5PREUgPSB0aGlzLmdyaWRbdGhpcy5zdGFydE5vZGVdW3RoaXMuc3RhcnROb2RlXTsKICAgICAgY29uc3QgR09BTE5PREUgPSB0aGlzLmdvYWxOb2RlOwogICAgICBjb25zdCBzaXplID0gdGhpcy5saXN0Lmxlbmd0aDsKICAgICAgcmV0dXJuIGRmcyh0aGlzLmdyaWQsIFNUQVJUTk9ERSwgR09BTE5PREUsIHNpemUpOwogICAgfSwKICAgIHZpc3VhbGl6ZUFTdGFyKCkgewogICAgICBjb25zdCBTVEFSVE5PREUgPSB0aGlzLmdyaWRbdGhpcy5zdGFydE5vZGVdW3RoaXMuc3RhcnROb2RlXTsKICAgICAgY29uc3QgR09BTE5PREUgPSB0aGlzLmdvYWxOb2RlOwogICAgICBjb25zdCBzaXplID0gdGhpcy5saXN0Lmxlbmd0aDsKICAgICAgY29uc3QgaGV1cmlzdGljID0gdGhpcy5jcmVhdGVIZXVyaXN0aWMoR09BTE5PREUpOwogICAgICBjb25zb2xlLmxvZygidGhlIGhldXJpc3RpYyBjaHVjaHUiKTsKICAgICAgY29uc29sZS5sb2coaGV1cmlzdGljKTsKICAgICAgY29uc3QgbXlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXN0YXInKTsKCiAgICAgIC8vIENyZWF0ZSBhIG5ldyB0YWJsZSBlbGVtZW50CiAgICAgIGNvbnN0IG15VGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpOwoKICAgICAgLy8gQ3JlYXRlIGEgaGVhZGVyIHJvdwogICAgICBjb25zdCBoZWFkZXJSb3cgPSBteVRhYmxlLmluc2VydFJvdygpOwogICAgICBjb25zdCBoZWFkZXJDZWxsMSA9IGhlYWRlclJvdy5pbnNlcnRDZWxsKCk7CiAgICAgIGNvbnN0IGhlYWRlckNlbGwyID0gaGVhZGVyUm93Lmluc2VydENlbGwoKTsKICAgICAgaGVhZGVyQ2VsbDEudGV4dENvbnRlbnQgPSAnTm9kZXMgIyc7CiAgICAgIGhlYWRlckNlbGwyLnRleHRDb250ZW50ID0gJ0hldXJpc3RpYyc7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBoZXVyaXN0aWMpIHsKICAgICAgICBjb25zdCByb3cgPSBteVRhYmxlLmluc2VydFJvdygpOwogICAgICAgIGNvbnN0IGNlbGwxID0gcm93Lmluc2VydENlbGwoKTsKICAgICAgICBjb25zdCBjZWxsMiA9IHJvdy5pbnNlcnRDZWxsKCk7CiAgICAgICAgY2VsbDEudGV4dENvbnRlbnQgPSBpdGVtLm5vZGU7CiAgICAgICAgY2VsbDIudGV4dENvbnRlbnQgPSBpdGVtLmh2YWw7CiAgICAgIH0KCiAgICAgIC8vIEFwcGVuZCB0aGUgdGFibGUgZWxlbWVudCB0byB0aGUgZGl2CiAgICAgIG15RGl2LmFwcGVuZENoaWxkKG15VGFibGUpOwogICAgICBjb25zdCBvdGhlclRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgLy8gQ3JlYXRlIGEgaGVhZGVyIHJvdwogICAgICBjb25zdCBoZWFkZXJSb3dvID0gb3RoZXJUYWJsZS5pbnNlcnRSb3coKTsKICAgICAgY29uc3QgaGVhZGVyQ2VsbDFvID0gaGVhZGVyUm93by5pbnNlcnRDZWxsKCk7CiAgICAgIGNvbnN0IGhlYWRlckNlbGwybyA9IGhlYWRlclJvd28uaW5zZXJ0Q2VsbCgpOwogICAgICBjb25zdCBoZWFkZXJDZWxsM28gPSBoZWFkZXJSb3dvLmluc2VydENlbGwoKTsKICAgICAgY29uc3QgaGVhZGVyQ2VsbDRvID0gaGVhZGVyUm93by5pbnNlcnRDZWxsKCk7CiAgICAgIGhlYWRlckNlbGwxby50ZXh0Q29udGVudCA9ICdOb2RlcyAjJzsKICAgICAgaGVhZGVyQ2VsbDJvLnRleHRDb250ZW50ID0gJ0ggY29zdCc7CiAgICAgIGhlYWRlckNlbGwzby50ZXh0Q29udGVudCA9ICdHIGNvc3QnOwogICAgICBoZWFkZXJDZWxsNG8udGV4dENvbnRlbnQgPSAnRiBjb3N0IChIK0cpJzsKICAgICAgb3RoZXJUYWJsZS5pZCA9ICdhc3RhcnRhYmxlJzsKICAgICAgb3RoZXJUYWJsZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7CiAgICAgIG15RGl2LmFwcGVuZENoaWxkKG90aGVyVGFibGUpOwogICAgICByZXR1cm4gYXN0YXIodGhpcy5ncmlkLCBTVEFSVE5PREUsIEdPQUxOT0RFLCBzaXplLCBoZXVyaXN0aWMpOwogICAgfSwKICAgIHZpc3VhbGl6ZUdyZWVkeUJGUygpIHsKICAgICAgY29uc3QgU1RBUlROT0RFID0gdGhpcy5ncmlkW3RoaXMuc3RhcnROb2RlXVt0aGlzLnN0YXJ0Tm9kZV07CiAgICAgIGNvbnN0IEdPQUxOT0RFID0gdGhpcy5nb2FsTm9kZTsKICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMubGlzdC5sZW5ndGg7CiAgICAgIGNvbnN0IGhldXJpc3RpYyA9IHRoaXMuY3JlYXRlSGV1cmlzdGljKEdPQUxOT0RFKTsKICAgICAgY29uc29sZS5sb2coInRoZSBoZXVyaXN0aWMgY2h1Y2h1Iik7CiAgICAgIGNvbnNvbGUubG9nKGhldXJpc3RpYyk7CiAgICAgIGNvbnN0IG15RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hldXJpc3RpYycpOwoKICAgICAgLy8gQ3JlYXRlIGEgbmV3IHRhYmxlIGVsZW1lbnQKICAgICAgY29uc3QgbXlUYWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CgogICAgICAvLyBDcmVhdGUgYSBoZWFkZXIgcm93CiAgICAgIGNvbnN0IGhlYWRlclJvdyA9IG15VGFibGUuaW5zZXJ0Um93KCk7CiAgICAgIGNvbnN0IGhlYWRlckNlbGwxID0gaGVhZGVyUm93Lmluc2VydENlbGwoKTsKICAgICAgY29uc3QgaGVhZGVyQ2VsbDIgPSBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpOwogICAgICBoZWFkZXJDZWxsMS50ZXh0Q29udGVudCA9ICdOb2RlcyAjJzsKICAgICAgaGVhZGVyQ2VsbDIudGV4dENvbnRlbnQgPSAnSGV1cmlzdGljJzsKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGhldXJpc3RpYykgewogICAgICAgIGNvbnN0IHJvdyA9IG15VGFibGUuaW5zZXJ0Um93KCk7CiAgICAgICAgY29uc3QgY2VsbDEgPSByb3cuaW5zZXJ0Q2VsbCgpOwogICAgICAgIGNvbnN0IGNlbGwyID0gcm93Lmluc2VydENlbGwoKTsKICAgICAgICBjZWxsMS50ZXh0Q29udGVudCA9IGl0ZW0ubm9kZTsKICAgICAgICBjZWxsMS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIGdyYXknOwogICAgICAgIGNlbGwyLnRleHRDb250ZW50ID0gaXRlbS5odmFsOwogICAgICAgIGNlbGwyLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgZ3JheSc7CiAgICAgICAgY2VsbDIuc3R5bGUucGFkZGluZyA9ICczcHgnOwogICAgICB9CgogICAgICAvLyBBcHBlbmQgdGhlIHRhYmxlIGVsZW1lbnQgdG8gdGhlIGRpdgogICAgICBteURpdi5hcHBlbmRDaGlsZChteVRhYmxlKTsKICAgICAgcmV0dXJuIGdyZWVkeUJGUyh0aGlzLmdyaWQsIFNUQVJUTk9ERSwgR09BTE5PREUsIHNpemUsIGhldXJpc3RpYyk7CiAgICB9LAogICAgdmlzdWFsaXplVW5pZm9ybUNvc3QoKSB7CiAgICAgIGNvbnN0IFNUQVJUTk9ERSA9IHRoaXMuZ3JpZFt0aGlzLnN0YXJ0Tm9kZV1bdGhpcy5zdGFydE5vZGVdOwogICAgICBjb25zdCBHT0FMTk9ERSA9IHRoaXMuZ29hbE5vZGU7CiAgICAgIGNvbnN0IHNpemUgPSB0aGlzLmxpc3QubGVuZ3RoOwogICAgICBjb25zdCBoZXVyaXN0aWMgPSB0aGlzLmNyZWF0ZUhldXJpc3RpYyhHT0FMTk9ERSk7CiAgICAgIHJldHVybiB1bmlmb3JtQ29zdCh0aGlzLmdyaWQsIFNUQVJUTk9ERSwgR09BTE5PREUsIHNpemUsIGhldXJpc3RpYyk7CiAgICB9LAogICAgcnVuR3JhcGgoKSB7CiAgICAgIGlmICh0aGlzLnJ1bm5hYmxlR3JhcGggJiYgdGhpcy5zZWxlY3RlZEl0ZW0udHJpbSgpICE9PSAiQWxnb3JpdGhtcyIpIHsKICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5zZWxlY3RlZEl0ZW07CiAgICAgICAgaWYgKGl0ZW0gPT09ICJCRlMiKSB7CiAgICAgICAgICBbdGhpcy52aXNpdGVkTm9kZXNJbk9yZGVyLCB0aGlzLmNhbGN1bGF0ZWRQYXRoXSA9IHRoaXMudmlzdWFsaXplQkZTKCk7CiAgICAgICAgfSBlbHNlIGlmIChpdGVtID09PSAiREZTIikgewogICAgICAgICAgW3RoaXMudmlzaXRlZE5vZGVzSW5PcmRlciwgdGhpcy5jYWxjdWxhdGVkUGF0aF0gPSB0aGlzLnZpc3VhbGl6ZURGUygpOwogICAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PT0gIkEqIikgewogICAgICAgICAgW3RoaXMudmlzaXRlZE5vZGVzSW5PcmRlciwgdGhpcy5jYWxjdWxhdGVkUGF0aF0gPSB0aGlzLnZpc3VhbGl6ZUFTdGFyKCk7CiAgICAgICAgfSBlbHNlIGlmIChpdGVtID09PSAiR3JlZWR5IEJGUyIpIHsKICAgICAgICAgIFt0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXIsIHRoaXMuY2FsY3VsYXRlZFBhdGhdID0gdGhpcy52aXN1YWxpemVHcmVlZHlCRlMoKTsKICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09ICJVbmlmb3JtIENvc3QiKSB7CiAgICAgICAgICBbdGhpcy52aXNpdGVkTm9kZXNJbk9yZGVyLCB0aGlzLmNhbGN1bGF0ZWRQYXRoXSA9IHRoaXMudmlzdWFsaXplVW5pZm9ybUNvc3QoKTsKICAgICAgICB9CgogICAgICAgIC8vIHRoaXMuYW5pbWF0ZUFsZ29yaXRobSh0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXIsIHRoaXMuY2FsY3VsYXRlZFBhdGgpOwogICAgICAgIGNvbnNvbGUubG9nKCJ0aGlzIGlzIGluIHJ1biBncmFwaGUiKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnZpc2l0ZWROb2Rlc0luT3JkZXIpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FsY3VsYXRlZFBhdGgpOwogICAgICAgIHRoaXMuY2FudFBsYXlOZXh0ID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":"AAmWA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAf;QACAC;MACA;MACAe;QACA;MAAA,CACA;MACAC;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAEA;EACA;;EACAC;IACA;IAEA;MACA;MACA;QAEA;UACAC;QACA,OACA;UACAA;QACA,OACA;UACAA;QACA;MACA;MACA;IACA;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;EACA;;EACAC;IACA;IACA;IACA;MACA;MACA;IACA;IACAC;EAGA;EAEAC;IAEAC;MACA;QACA;MAEA;IACA;IACA;IACA;IACA;IACA;EAGA;;EAGAC;IACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;MACAN;MACA;MACA;MACA;MACA;MACA;MACA;MACAA;MACAA;MACAA;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACAO;MACA;MACA;;MAEA;;MAEA;MACA;IACA;;IACAC;MACA;MACAR;MACA;QACA;QACAA;MAEA,OACA;QACA;MAEA;IACA;IACAS;MACA;MACA;IAEA;IACAC;MACA;MACA;IACA;IAEAC;MAEAX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACAY;;MAGA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;QACAC;QACA;MACA;MACA;IAIA;IACAC;MACA;MACA;MAEA;QACA;MACA;MACAd;MACA;MAEA;MACAe;QACAf;QACA;QAEAgB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAGA;;QAGA;MACA;;MACAD;IAKA;IAEAE;MACA;QACAjB;QACA;QACA;QACA;QACA;QACA;QACAA;QACAA;MAEA;IACA;IACAkB;MACAC;IACA;IACAC;MACA;MAEA;MAEApB;MACA;MACA;QACAqB;MACA;MAEArB;MAEA;MAKA;QACAA;QACA;QACAqB;UACAC;UACAC;UACAC;QACA;MAEA;MAEAH;QACAC;QACAC;QACAC;MACA;MAEA;IAEA;IAEAC;MAEA;QACA9D;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAoD;QACAlD;QACAC;QACAC;QACAK;QACAD;MACA;MAGA;MACA;QAAA6C;MAAA;MACA;MACA;MACAC;MACAA;MACAT;MACAS;MACAT;MACAU;MAGA;MACA7B;IACA;IAIA8B;MACA;MAEA;MACA9B;MACA;MAGA;MAGA;QACAqB;MACA;MAEA;QACA;QACAA;UACAC;UACAC;UACAC;QACA;MAEA;MAEAH;QACAC;QACAC;QACAC;MACA;MAEA;IACA;IACAO;MACA;QACA;QACA/B;QACA;UACA;QACA;QACA;QACA;UACAgC;UACAC;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;QACA;QACAC,mBACAA,oBACAA,oBACAC,OACAA,MACA;MACA;IACA;IACAC;MACA;QACA;QACA;UACA;QACA;QACA;QACA;QACA;UACA,OACAC;QAEA;QACA;UACA;QACA;QACAtC;QACA;QACA;QACA,qBACAuC,iDACAA,+CACA;QACA;UACAP;UACAQ;UACAC,GACAF,6CACAA,kDACA;UACAG,GACAH,6CACAA,kDACA;QACA;QAEA;QACA;QACAvC;QACAA;QACAA;QAEAmC;QACAA,mBACAA,oBACAA,oBACA5B,cACAA,aACA;QAEA;UACA;QACA;QACAP;QAEAA;QACAA;QACAA;MAGA;IAGA;IACA2C;MACA;QACA;QACA;QACA3C;QACAA;;QAEA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QAEA;UACA;QACA;QAEA;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA;UACA;UACA;;UAEA;UACA4C;UACAC;UACAC;UACAC;QACA;MAEA;MACA,4BACA;MACA;QACA;QACA;MACA;IAIA;IACAC;MACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MAEA;MACA,4BACA;MAEA;QACA;QACA;MAEA;IACA;IAGAC;MACA;MACA;MACAjD;MACAA;MACA;MAGA;QACA,qBACAuC,0CACAA,wCACA;QACAW;UAAA5B;UAAA6B;QAAA;MACA;MAEA;IAEA;IACAC;MACA;MACA;QACA;QACA;UACAC;QACA;QACA1F;MACA;MACA;MACAqC;MACAA;IACA;IAEA;IACAsD;MACA;QACAC;QACAC;QACAhB;QACAiB;QACAC;QACAC;UACAC;UACAC;UACAC;QACA;MACA;IAEA;IAEAC;MAGA;QAEAC;UACA;QACA;MAGA;MACAA;QACA;MACA;IAEA;IAEAC;MACA;MAEA;MACA;MAEA;MACAjE;MACA;MAIA;MACA;MACA;MAGA;MACA;MAGA;QACAsB;QAEAC;QACAC;MACA;MACAxB;MAEA;QACAsB;QAEAC;QACAC;MACA;MAEAxB;IACA;IAEAkE;MACA;;MAEA;MACA;MAIA;MACA;MAEA;MACAlE;MACA;MAIA;MACA;MACA;MAGA;MACA;MAGA;QACAsB;QACAE;MACA;MACAxB;MAEA;QACAsB;QAEAC;QACA;QACAC;MACA;MAEAxB;IAEA;IAEAmE;MAEA;QAEAH;UACA;QACA;MAEA;IACA;IACAI;MACA;MACA;QACA;QACA;QACA;MACA;MAEA;QACA;QAEA;QACA;QAEA;UACA;UACAC;UACAA;QACA;QACA;UACA;UACAA;UACAA;QACA;MAEA;MAEA;QAEAL;UACA;QACA;MAEA;IACA;IACAM;MACA;MACA;MACA;MACA;IAGA;IACAC;MACA;MACA;MACA;MACA;IAGA;IACAC;MACA;MACA;MACA;MACA;MACAxE;MACAA;MAEA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;MACAyE;MACAC;MAGA;QACA;QACA;QACA;QACA9B;QACAC;MAGA;;MAEA;MACA8B;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAA;MAEAL;MAEA;IAEA;IACAM;MACA;MACA;MACA;MACA;MAGAjF;MACAA;MAEA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;MACAyE;MACAC;MAGA;QACA;QACA;QACA;QACA9B;QACAA;QACAC;QACAA;QACAA;MAEA;;MAEA;MACA8B;MAEA;IAEA;IACAO;MACA;MACA;MACA;MACA;MACA;IAEA;IAEAC;MAEA;QAEA;QACA;UACA;QACA,OACA;UACA;QACA,OACA;UACA;QACA,OACA;UACA;QACA,OACA;UACA;QACA;;QAEA;QACAnF;QACAA;QACAA;QACA;MAEA;IACA;EAEA;AAEA","names":["data","file","fileContents","objectUrl","grid","startNode","goalNode","prevStartNode","prevGoalNode","optionsStartNode","list","edges","distances","connection","vertex","connections","drawingLine","runnableGraph","selectedItem","coor","stageSize","width","height","tableData","theStage","cantPlayPrev","cantPlayNext","cantrunShortPath","visitedCount","visitedNodesInOrder","calculatedPath","listNodesFrom","listNodesTo","outputNodesFrom","outputNodesTo","labelResult","stageConfigTree","nodes","arrows","created","arr","console","mounted","observer","computed","optionsGoalNode","methods","handleDragMove","e","onclickDrop","addingConnection","addingVertex","clearScreen","stage","URL","onFileSelected","reader","result","handleClick","chooseFiles","document","changeColorStart","tween","node","fill","stroke","savefile","drawing","type","link","window","changeColorGoal","handleMouseDown","id","points","handleMouseMove","lastLine","pos","handleMouseUp","point","Math","distance","x","y","next","cell1","cell2","cell3","cell4","prev","createHeuristic","heuristic","hval","initializeGrid","currentRow","createNode","point1","point2","isVisited","previousNode","cost","F","G","H","animateAlgorithm","setTimeout","colorNode","undoColorNode","animateShortestPath","getPath","table","visualizeBFS","visualizeDFS","visualizeAStar","headerCell1","headerCell2","myDiv","headerCell1o","headerCell2o","headerCell3o","headerCell4o","otherTable","visualizeGreedyBFS","visualizeUniformCost","runGraph"],"sourceRoot":"src/components","sources":["Index.vue"],"sourcesContent":["<template>\r\n<div class=\"row\">\r\n<div class=\"sidebar\">\r\n        <h1 class=\"mt-4\">Pathfinding</h1>\r\n        <h1> Visualizer</h1>\r\n        <div class=\"grid-container mx-4 mt-3\">\r\n          <div class=\"button-div1 mx-3\">\r\n             <b-dropdown block class=\"ml-2 algobtn \" :text=\"selectedItem\" v-model=\"selectedItem\" >\r\n                <b-dropdown-header id=\"unweighted\">\r\n                  Unweighted\r\n                </b-dropdown-header>\r\n                <b-dropdown-item-button :key=\"'BFS'\" @click=\"onclickDrop('BFS')\"  aria-describedby=\"unweighted\">\r\n                  BFS\r\n                </b-dropdown-item-button>\r\n                <b-dropdown-item-button :key=\"'DFS'\" @click=\"onclickDrop('DFS')\"  aria-describedby=\"unweighted\" >\r\n                  DFS\r\n                </b-dropdown-item-button>\r\n                <b-dropdown-header id=\"weighted\">\r\n                  Weighted\r\n                </b-dropdown-header>\r\n                <b-dropdown-item-button :key=\"'Uniform Cost'\" @click=\"onclickDrop('Uniform Cost')\"  aria-describedby=\"unweighted\">\r\n                  Uniform Cost\r\n                </b-dropdown-item-button>\r\n                <b-dropdown-item-button :key=\"'Greedy BFS'\" @click=\"onclickDrop('Greedy BFS')\"  aria-describedby=\"unweighted\">\r\n                  Greedy BFS\r\n                </b-dropdown-item-button>\r\n                <b-dropdown-item-button :key=\"'A*'\" @click=\"onclickDrop('A*')\"  aria-describedby=\"unweighted\">\r\n                  A*\r\n                </b-dropdown-item-button>\r\n              \r\n            </b-dropdown>\r\n          </div>\r\n          <div class=\"button-div2 ml-4 mr-2 mt-2\">\r\n             <input id=\"fileUpload\" type=\"file\" @change=\"onFileSelected\" hidden>\r\n             <b-button block  @click=\"chooseFiles()\"  > Import Graph </b-button>\r\n          </div>\r\n          <div class=\"button-div3 mr-3 mt-2\">\r\n              <b-button block @click=\"savefile\"> Save Graph </b-button>\r\n          </div>\r\n          <div class=\"button-div4\">\r\n             <h6 class=\"mt-3\"> <b>Add to Graph </b></h6>\r\n          </div>\r\n          <div class=\"button-div5 ml-4 mr-2 mt-2\">\r\n              <b-button block class=\"btn btn-secondary\" @click=\"addingVertex\" >\r\n                Vertex\r\n              </b-button>\r\n          </div>\r\n          <div class=\"button-div6 mr-3 mt-2\">\r\n             <b-button block  class=\"btn btn-secondary\" @click=\"addingConnection\">\r\n                Connection\r\n              </b-button>\r\n          </div>\r\n          <!-- </div> -->\r\n          <!-- <div class=\"button-div7\"></div>\r\n          <div class=\"button-div8\"></div> -->\r\n          <div class=\"button-div8 ml-3 mr-4\">\r\n             <b-button block class=\"btn ml-2 mr-3 btn-secondary\" @click=\"runGraph\">Visualize Algo</b-button>\r\n          </div>\r\n          <div class=\"button-div10 ml-3 mr-4\">\r\n             <b-button :disabled=\"cantrunShortPath\" block class=\"btn ml-2 mr-3 btn-secondary\" @click=\"getPath\">Get the Path</b-button>\r\n          </div>\r\n          <div class=\"button-div9 ml-3 mr-4\">\r\n             <b-button block class=\"btn ml-2 mr-3 btn-secondary \" @click=\"clearScreen\">Clear Graph</b-button>\r\n          </div>\r\n          <!--  <div class=\"button-div7\"> -->\r\n            <b-form inline class=\"button-div7 mx-3 mb-2\" > \r\n              <div class=\"button-div10 mx-2 \">\r\n              \r\n                  <label class=\"\" for=\"start-node\">Start node:</label>\r\n                  <b-form-select\r\n                    @change=\"changeColorStart\"\r\n                    id=\"start-node\"\r\n                    class=\"\"\r\n                    :options=\"optionsStartNode\"\r\n                    v-model=\"startNode\"\r\n                    :value=\"null\"\r\n                  ></b-form-select>\r\n              </div>\r\n              <div class=\"button-div11\">\r\n                <label class=\"\" for=\"end-node\">Goal node:</label>\r\n                <b-form-select\r\n                  id=\"end-node\"\r\n                  class=\"\"\r\n                  @change=\"changeColorGoal\"\r\n                  :options=\"optionsGoalNode\"\r\n                  v-model=\"goalNode\"\r\n                  :value=\"null\"\r\n                ></b-form-select>\r\n              </div>\r\n            </b-form>\r\n         \r\n        \r\n          \r\n        </div>\r\n       \r\n      \r\n    </div>\r\n\r\n\r\n    <div class=\"main container\">\r\n        <!-- <p> For the are viewers out there.. if you see this text, it means this is still under development. But you can view the algorithms, it's already done.. </p> -->\r\n      \r\n         <div class=\"row pt-4 ml-4\">\r\n            \r\n             <b-card class=\"col-7 drawArea\" id=\"drawArea\" style=\"height: 35rem\">\r\n                <v-stage\r\n                  :config=\"stageSize\"\r\n                  @click=\"handleClick\"\r\n                  ref=\"konva\"\r\n                  @mousedown=\"handleMouseDown\"\r\n                  @mouseup=\"handleMouseUp\"\r\n                  @mousemove=\"handleMouseMove\"\r\n                >\r\n                <v-layer ref=\"layer\">\r\n                      <v-line\r\n                        v-for=\"line in connections\"\r\n                        :key=\"line.id\"\r\n                        :config=\"{\r\n                          stroke: 'black',\r\n                          points: line.points,\r\n                          id: line.id\r\n                          \r\n                        }\"\r\n                      />\r\n\r\n                    <v-circle\r\n                      \r\n                      v-for=\"(item, index) in list\"\r\n                      :key=\"item.id\"\r\n\r\n                      :config=\"{\r\n                        x: item.x,\r\n                        y: item.y,\r\n                        \r\n                        radius: 15,\r\n                        fill: '#a20417',\r\n                        //draggable:true,\r\n                        stroke: '#a20417',\r\n                        strokeWidth: 2,\r\n                        id:'circle'+index\r\n                      }\"\r\n                    ></v-circle>\r\n                  <v-text\r\n                    v-for=\"(item, index) in list\"\r\n                    :key=\"item.id\"\r\n                    :config=\"{\r\n                      x: item.x + 11,\r\n                      y: item.y + 11,\r\n                      text: index,\r\n                      fontSize: 15,\r\n                      width: 300,\r\n                    }\" \r\n                  ></v-text>\r\n                  <v-text\r\n                    v-for=\"label in distances\"\r\n                    :key=\"label.id\"\r\n                    :config=\"{\r\n                      x: label.x,\r\n                      y: label.y,\r\n                      text: label.distance,\r\n                    }\"\r\n                  />\r\n            <p class=\"text-left\">Click Vertex button and click here to add vertex</p>\r\n            <!-- <v-text :key=\"label_txt\" :config=\"{ text: 'Click Vertex button and click here to add vertex'}\"/> -->\r\n                  </v-layer>\r\n                </v-stage>\r\n             </b-card>\r\n            \r\n                <b-card class=\"col-4 ml-3\" id=\"label\" style=\"height: 35rem\">\r\n                    <div class=\"row box-top\">\r\n\r\n                       <h4>Graph Details</h4>\r\n                       <button :disabled=\"cantPlayPrev\" @click=\"prev\" class=\"btn btn-outline-secondary rounded-circle play-button push-top mr-2\"> prev</button>\r\n                       <button :disabled=\"cantPlayNext\" @click=\"next\" class=\"btn btn-outline-secondary rounded-circle play-button mr-3\">next</button>\r\n                       <!-- <button :disabled=\"disablePath\" @click=\"getShortPath\" class=\"btn btn-outline-secondary rounded-circle play-button\">Get Path</button> -->\r\n                    </div>\r\n                    \r\n                    <div id=\"heuristic\"></div>\r\n                    <div id=\"astar\"></div>\r\n                    <div v-if=\"selectedItem ==='BFS' || selectedItem ==='DFS'\">\r\n                      <div class=\"row\">\r\n                        \r\n                        <p>Adjacency Matrix</p>\r\n                        \r\n                      </div>\r\n                      <table id=\"my-table\">\r\n                          \r\n                          <tbody>\r\n                            <tr v-for=\"(row, rowIndex) in tableData\" :key=\"rowIndex\">\r\n                              <td v-for=\"(cell, cellIndex) in row\" :key=\"cellIndex\" >{{ cell }}</td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      <div class=\"row mt-3\" id=\"distance-list\" >\r\n                        <div class=\"ml-1\">\r\n                        \r\n                          <p>{{ labelResult }}</p>\r\n                          \r\n                        </div>\r\n                       \r\n                        <table  class=\" mt-4\" id=\"resTable\">\r\n                          \r\n                          <tbody>\r\n                            <tr>\r\n                              <td v-if=\"listNodesFrom.length !=0\" class=\"stack\">From</td>\r\n                              <td class=\"stack\" v-for=\"from in listNodesFrom\"  :key=\"from\">{{ from }}</td>\r\n                              <!-- <td v-for=\"(item, index) in listNodes\" :key=\"item.id\">{{ cell }}</td> -->\r\n                            </tr>\r\n                            <tr>\r\n                              <td v-if=\"listNodesTo.length !=0\" class=\"stack\">To</td>\r\n                              <td class=\"stack\" v-for=\"toNode in listNodesTo\"  :key=\"toNode\">{{ toNode }}</td>\r\n                              <!-- <td v-for=\"(item, index) in listNodes\" :key=\"item.id\">{{ cell }}</td> -->\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                      <div class=\"row mt-3\" id=\"distance-list\" >\r\n                        <div class=\"ml-1\">\r\n                        \r\n                        <p>Output</p>\r\n                        \r\n                       </div>\r\n\r\n                        <table  class=\" mt-4\" >\r\n                          \r\n                          <tbody>\r\n                            <tr>\r\n                              <td v-if=\"outputNodesFrom.length !=0\" class=\"stack\">To</td>\r\n                              <td class=\"stack\" v-for=\"fromNodes in outputNodesFrom\"  :key=\"fromNodes\">{{ fromNodes }}</td>\r\n                              <!-- <td v-for=\"(item, index) in listNodes\" :key=\"item.id\">{{ cell }}</td> -->\r\n                            </tr>\r\n                            <tr>\r\n                              <td v-if=\"outputNodesTo.length !=0\" class=\"stack\">From</td>\r\n                              <td class=\"stack\" v-for=\"toNodes in outputNodesTo\"  :key=\"toNodes\">{{ toNodes }}</td>\r\n                              <!-- <td v-for=\"(item, index) in listNodes\" :key=\"item.id\">{{ cell }}</td> -->\r\n                            </tr>\r\n                            \r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div  v-if=\"!(selectedItem ==='BFS' || selectedItem ==='DFS')\">\r\n                      <v-stage ref=\"stageTree\" :config=\"stageConfigTree\">\r\n                        <v-layer ref=\"layerTree\">\r\n                                <v-line\r\n                                  v-for=\"line in arrows\"\r\n                                  :key=\"'arr-'+line.id\"\r\n                                  :config=\"{\r\n                                    stroke: 'black',\r\n                                    points: [nodes[line.point1].x,nodes[line.point1].y, nodes[line.point2].x, nodes[line.point2].y],\r\n                                    id: 'arr-'+line.id\r\n                                    \r\n                                  }\"\r\n                                />\r\n                                <v-group\r\n                                  v-for=\"(item, index) in nodes\"\r\n                                  :key=\"item.id\"\r\n                                  :id=\"'circleTree-'+index\"\r\n                                  @dragmove=\"handleDragMove\"\r\n                                  :config=\"{\r\n                                    x: item.x ,\r\n                                    y: item.y,\r\n                                    draggable: true,\r\n                                    \r\n                                  }\"\r\n                                  >\r\n                                  <v-ellipse\r\n                                    :key=\"'node' + item.id\"\r\n                                    :config=\"{\r\n                                      x: 0,\r\n                                      y: 0,\r\n                                      \r\n                                      radiusY: 10,\r\n                                      radiusX: 20,\r\n                                      fill: 'black',\r\n                                      //draggable:true,\r\n                                     \r\n                                      stroke: 'black',\r\n                                      strokeWidth: 1,\r\n                                      id:'ellipse'+index\r\n                                    }\"\r\n                                  ></v-ellipse>\r\n                                <v-text\r\n                                  :config=\"{\r\n                                    text: index,\r\n                                    x: 0-5,\r\n                                    y: 0-5,\r\n                                    text: index,\r\n                                    fontSize: 15,\r\n                                    fill:'white',\r\n                                    width: 300\r\n                                  }\"\r\n                                ></v-text>\r\n                                <v-text\r\n                                  :config=\"{\r\n                                    text: index,\r\n                                    x: 0-5,\r\n                                    y: 0+12,\r\n                                    text: index,\r\n                                    fontSize: 15,\r\n                                    fill:'black',\r\n                                    width: 300\r\n                                  }\"\r\n                                ></v-text>\r\n                              </v-group>  \r\n\r\n                              <!-- <v-ellipse\r\n                                \r\n                                v-for=\"(item, index) in nodes\"\r\n                                :key=\"item.id\"\r\n\r\n                                :config=\"{\r\n                                  x: item.x,\r\n                                  y: item.y,\r\n                                  \r\n                                  radiusY: 10,\r\n                                  radiusX: 20,\r\n                                  fill: 'black',\r\n                                  //draggable:true,\r\n                                  draggable: true ,\r\n                                  stroke: 'black',\r\n                                  strokeWidth: 1,\r\n                                  id:'circleTree'+index\r\n                                }\"\r\n                              ></v-ellipse>\r\n                            <v-text\r\n                              v-for=\"(item, index) in nodes\"\r\n                              :key=\"item.id+'txt'\"\r\n                              :config=\"{\r\n                                x: item.x-5,\r\n                                y: item.y-5,\r\n                                text: index,\r\n                                fontSize: 15,\r\n                                fill:'white',\r\n                                width: 300\r\n\r\n                              }\" \r\n                            ></v-text> -->\r\n                        </v-layer>\r\n                      </v-stage>\r\n                    </div>\r\n                </b-card>\r\n\r\n          \r\n\r\n         </div>\r\n         \r\n        \r\n    </div>\r\n\r\n</div>\r\n  \r\n</template>\r\n<script>\r\nimport { Layer } from 'vue-konva';\r\nimport Konva from \"konva\";\r\nimport {bfs} from '../algorithms/breadthFirstSearch';\r\nimport {dfs} from '../algorithms/depthFirstSearch';\r\nimport {greedyBFS} from '../algorithms/greedyBestFirstSearch';\r\nimport {astar} from '../algorithms/astar';\r\nimport {uniformCost} from '../algorithms/uniformCost';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      file: null, \r\n      fileContents: null,\r\n      objectUrl: null,\r\n      grid: null,\r\n      startNode: null,\r\n      goalNode: null,\r\n      prevStartNode: '',\r\n      prevGoalNode:'',\r\n      optionsStartNode:[],   \r\n      list: [],\r\n      edges: [],\r\n      distances: [],\r\n      connection: false,\r\n      vertex: false,\r\n      connections: [],\r\n      drawingLine: false,\r\n      runnableGraph: false,\r\n      selectedItem: \"Algorithms\",\r\n      coor: \"\",\r\n      stageSize: {\r\n          width: 200,\r\n          height: 200,\r\n        },\r\n      tableData:[],\r\n      theStage:[],\r\n      //this is for the animation so no need to import it\r\n      cantPlayPrev:true,\r\n      cantPlayNext:true,\r\n      cantrunShortPath:true,\r\n      visitedCount: 0,\r\n      visitedNodesInOrder: null, \r\n      calculatedPath: null,\r\n      listNodesFrom: [],\r\n      listNodesTo: [],\r\n      outputNodesFrom: [],\r\n      outputNodesTo: [],\r\n      labelResult:'Details',\r\n      stageConfigTree: {\r\n        width:300,\r\n        height: 450\r\n      },\r\n      nodes: [\r\n        // { id: 0, name: 'Root', x: 150, y: 20 },\r\n      ],\r\n      arrows:[\r\n\r\n      ]\r\n      // nodes: [\r\n      //   { id: 1, name: 'Root', x: 150, y: 20 },\r\n      //   { id: 2, name: 'Child 1', x: 55, y: 70 },\r\n      //   { id: 3, name: 'Child 2', x: 110  , y: 70},\r\n      //   { id: 4, name: 'Child 2', x: 165 , y: 70 },\r\n      //   { id: 5, name: 'Child 2', x: 220 , y: 70 },\r\n      //   { id: 6, name: 'grandchild 1', x: 40, y: 120 },\r\n      //   { id: 7, name: 'grandchild 2', x: 80  , y: 120},\r\n      //   { id: 8, name: 'grandchild 2', x: 120 , y: 120 },\r\n      //   { id: 9, name: 'grandchild 2', x: 160 , y: 120 }\r\n      // ],\r\n      // arrows:[\r\n      //   { id: 1, point1: 0 , point2: 2},\r\n      //   { id: 2, point1: 0 , point2: 3},\r\n      //   { id: 3, point1: 0 , point2: 4},\r\n      // ]\r\n     \r\n    };\r\n  },\r\n  created: function() {\r\n     this.initializeGrid();\r\n\r\n     for (let i = 0; i < 12; i++) {\r\n      let arr =[];\r\n      for (let j = 0; j < 12; j++) {\r\n       \r\n        if(i==0 && j!=0){\r\n          arr[j] = j-1;\r\n        }\r\n        else if(j==0 && i!=0 ){\r\n          arr[j] = i-1;\r\n        }\r\n        else{\r\n          arr[j] = \"0\";\r\n        }\r\n      }\r\n      this.tableData.push(arr);\r\n    }\r\n    console.log(this.tableData);\r\n    //  for (let i = 0; i < 22; i++) {\r\n    //       // Create a new row\r\n    //       const row = document.createElement('tr');\r\n    //       for (let j = 0; j < 22; j++) {\r\n    //         // Create a new cell and add it to the row\r\n    //          cell = document.createElement('td');\r\n    //         if(i==0 && j!=0){\r\n    //           cell.textContent = j-1;\r\n    //         }\r\n    //         else if(j==0 && i!=0 ){\r\n    //           cell.textContent = i-1;\r\n    //         }\r\n    //         else{\r\n    //           cell.textContent = \"0\";\r\n    //         }\r\n            \r\n    //         row.appendChild(cell);\r\n    //       }\r\n    //       // Add the row to the table\r\n    //       document.getElementById('matrix').appendChild(row);\r\n    //   }\r\n  },\r\n  mounted: function () {\r\n    //For Dynamic Stage Size\r\n    const container = document.querySelector(\".drawArea\");\r\n    const observer = new ResizeObserver(() => {\r\n      this.stageSize.width = container.offsetWidth;\r\n      this.stageSize.height = container.offsetHeight;\r\n    });\r\n    observer.observe(container);\r\n\r\n    \r\n  },\r\n \r\n  computed:{\r\n   \r\n    optionsGoalNode(){\r\n        return this.optionsStartNode.filter((node) => {\r\n            return node !== this.startNode;\r\n        \r\n        });\r\n    },   \r\n    // cellHasValue(){\r\n    //      const cells = document.querySelector(\"td\"); // Get all table cells\r\n    //      return Array.from(cells).some(cell => cell.textContent.trim() == 0 );\r\n    // }\r\n\r\n    \r\n  },\r\n\r\n  \r\n  methods: {\r\n    // handleDragEnd(){\r\n    //   console.log(\"handle Drag End works\")\r\n    // },\r\n    handleDragMove(e){\r\n      const onEllipse = e.target instanceof Konva.Group;\r\n      if (!onEllipse) {\r\n          return;\r\n      }\r\n      let id = parseInt(e.target.id().split('-').pop());\r\n      console.log(this.nodes[id]);\r\n      const stage = e.target.getStage();\r\n      var shape = stage.findOne('#circleTree-'+id);\r\n      this.nodes[id].x = e.target.x(); \r\n      this.nodes[id].y = e.target.y(); \r\n      // var arr = stage.findOne('#arr-'+1);\r\n    //  console.log(arr)\r\n      console.log(this.nodes[id].x)\r\n      console.log(this.nodes[id].y)\r\n      console.log(shape.x())\r\n      console.log(shape.y())\r\n      // console.log(onEllipse.x())\r\n      // console.log(shape.x(e.target.x()))\r\n      // this.$refs.layerTree.batchDraw();\r\n      // console.log(e.target.getAbsolutePosition().x/ stage.width())\r\n      // console.log(e.target.getAbsolutePosition().y/ stage.height())\r\n      // console.log(\"x\"+e.target.x())\r\n      e.target.getLayer().batchDraw();\r\n      // for(let i=0; i<this.arrows.length;i++){\r\n      //   if(this.arrows[i].point1 === e.target.id()){\r\n\r\n      //   }\r\n        \r\n      // }\r\n      // console.log(e.target.x())\r\n    },\r\n    onclickDrop(option){\r\n      this.selectedItem = option;\r\n      console.log(\"onchange\")\r\n      if(this.selectedItem.trim() === \"BFS\"){\r\n        this.labelResult = \"Queue\";\r\n        console.log(\"this works for queue\")\r\n        \r\n      }\r\n      else if(this.selectedItem.trim() === \"DFS\"){\r\n        this.labelResult = \"Stack\";\r\n        \r\n      }\r\n    },\r\n    addingConnection() {\r\n      this.connection = !this.connection;\r\n      this.vertex = false;\r\n      \r\n    },\r\n    addingVertex() {\r\n      this.connection = false;\r\n      this.vertex = !this.vertex;\r\n    },\r\n\r\n    clearScreen() {\r\n\r\n      console.log(\"this could work\");\r\n      this.grid= null;\r\n      this.startNode= null;\r\n      this.goalNode= null;\r\n      this.prevStartNode= '';\r\n      this.prevGoalNode='';\r\n      this.optionsStartNode=[];   \r\n      this.list= [];\r\n      this.edges= [];\r\n      this.distances= [];\r\n      this.connection= false;\r\n      this.vertex= false;\r\n      this.connections= [];\r\n      this.drawingLine= false;\r\n      this.runnableGraph= false;\r\n      this.selectedItem= \"Algorithms\";\r\n      this.coor= \"\";\r\n\r\n      const stage = this.$refs.konva.getStage();\r\n      // Clear the stage to remove all children and reset properties\r\n      stage.clear();\r\n      \r\n      \r\n      // this.theStage.clear();\r\n      this.theStage = []; \r\n\r\n      this.$forceUpdate();\r\n      // Clear the file reference\r\n      this.file = null;\r\n      // Clear the file contents\r\n      this.fileContents = null;\r\n      // Revoke the object URL\r\n      if (this.objectUrl) {\r\n        URL.revokeObjectURL(this.objectUrl);\r\n        this.objectUrl = null;\r\n      }\r\n      this.initializeGrid();\r\n     \r\n\r\n\r\n    },\r\n    onFileSelected(event) {\r\n      this.file = event.target.files[0];\r\n      let result;\r\n\r\n      if (!this.file) {\r\n        return;\r\n      }\r\n      console.log(\"this works\");\r\n      this.objectUrl = URL.createObjectURL(this.file);\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        console.log(\"readerworks\");\r\n        this.fileContents = event.target.result;\r\n       \r\n        result = JSON.parse(this.fileContents);\r\n        this.grid= result[\"grid\"];\r\n        this.startNode= result[\"startNode\"];\r\n        this.goalNode=  result[\"goalNode\"];\r\n        this.prevStartNode= result[\"prevStartNode\"];\r\n        this.prevGoalNode= result[\"prevGoalNode\"];\r\n        this.optionsStartNode= result[\"optionsStartNode\"];   \r\n        this.list= result[\"list\"];\r\n        this.edges= result[\"edges\"];\r\n        this.distances= result[\"distances\"];\r\n        this.connection= false;\r\n        this.vertex= true;\r\n        this.connections= result[\"connections\"];\r\n        this.drawingLine= result[\"drawingLine\"];\r\n        this.runnableGraph= result[\"runnableGraph\"];\r\n        this.selectedItem=  result[\"selectedItem\"];\r\n        this.coor= result[\"coor\"];\r\n        this.tableData = result[\"tableData\"];\r\n        this.theStage = Konva.Node.create(result[\"theStage\"], 'drawArea');\r\n      \r\n\r\n        // this.theStage =new Konva.Stage(result[\"theStage\"], 'drawArea');\r\n       \r\n\r\n        // Perform your desired action with the file contents here\r\n      };\r\n      reader.readAsText(this.file);\r\n\r\n     \r\n      \r\n      \r\n    },\r\n\r\n    handleClick(evt) {\r\n      if (this.vertex && this.list.length < 20) {\r\n        console.log(\"this works circle\");\r\n        this.optionsStartNode.push(this.list.length);\r\n        const stage = evt.target.getStage();\r\n        const pos = stage.getPointerPosition();\r\n        this.list.push(pos);\r\n        this.theStage = stage;\r\n        console.log(\"list\");\r\n        console.log(this.list);\r\n      \r\n      }\r\n    },\r\n    chooseFiles() {\r\n        document.getElementById(\"fileUpload\").click()\r\n    },\r\n    changeColorStart(){\r\n        var tween;\r\n       \r\n        var id = \"#circle\"+this.startNode;\r\n        \r\n        console.log(id);\r\n        const stage = this.theStage;\r\n        if (tween) {\r\n          tween.destroy();\r\n        }\r\n\r\n        console.log(stage);\r\n       \r\n        var shape = stage.findOne(id);\r\n         \r\n\r\n       \r\n\r\n        if(this.prevStartNode !== ''){\r\n          console.log(this.prevStartNode);\r\n          var prevShape = stage.findOne(this.prevStartNode);\r\n          tween = new Konva.Tween({\r\n            node: prevShape,\r\n            fill:\"#a20417\",\r\n            stroke:\"#a20417\"\r\n          }).play();\r\n          \r\n        }\r\n\r\n        tween = new Konva.Tween({\r\n          node: shape,\r\n          fill:\"#2f9c6e\",\r\n          stroke:\"#2f9c6e\"\r\n        }).play();\r\n        \r\n        this.prevStartNode = id;\r\n\r\n    },\r\n    \r\n    savefile(){\r\n\r\n      let result = {\r\n        grid: this.grid,\r\n        startNode: this.startNode,\r\n        goalNode: this.goalNode,\r\n        prevStartNode: this.prevStartNode,\r\n        prevGoalNode: this.prevGoalNode,\r\n        optionsStartNode: this.optionsStartNode,   \r\n        list: this.list,\r\n        edges: this.edges,\r\n        distances: this.distances,\r\n        connection: this.connection,\r\n        vertex: this.vertex,\r\n        connections: this.connections,\r\n        drawing: this.drawingLine,\r\n        runnableGraph: this.runnableGraph,\r\n        selectedItem: this.selectedItem,\r\n        coor: this.coor,\r\n        theStage: this.theStage,\r\n        tableData: this.tableData\r\n      }\r\n\r\n     \r\n      let data = JSON.stringify(result);\r\n      const blob = new Blob([data], { type: 'text/plain' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', 'TheGraph.txt'); // Replace with your own filename\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n\r\n\r\n      const stage = this.$refs.konva.$stage; // Get the Konva stage instance\r\n      console.log(stage);\r\n    },\r\n\r\n   \r\n\r\n    changeColorGoal(){\r\n        var tween;\r\n       \r\n        var id = \"#circle\"+this.goalNode;\r\n        console.log(id);\r\n        const stage = this.theStage;\r\n\r\n       \r\n        var shape = stage.findOne(id);\r\n         \r\n\r\n        if (tween) {\r\n          tween.destroy();\r\n        } \r\n        \r\n        if(this.prevGoalNode !== ''){\r\n          var prevShape = stage.findOne(this.prevGoalNode);\r\n          tween = new Konva.Tween({\r\n            node: prevShape,\r\n            fill:\"#a20417\",\r\n            stroke:\"#a20417\"\r\n          }).play();\r\n         \r\n        }\r\n\r\n        tween = new Konva.Tween({\r\n          node: shape,\r\n          fill:\"#004019\",\r\n          stroke:\"#004019\"\r\n        }).play();\r\n        \r\n        this.prevGoalNode = id;\r\n    },\r\n    handleMouseDown(e) {\r\n      if (this.connection) {\r\n        const onCircle = e.target instanceof Konva.Circle;\r\n        console.log(onCircle.id)\r\n        if (!onCircle) {\r\n          return;\r\n        }\r\n        this.drawingLine = true;\r\n        this.connections.push({\r\n          id: Date.now(),\r\n          points: [e.target.x(), e.target.y()],\r\n        });\r\n      }\r\n    },\r\n    handleMouseMove(e) {\r\n      if (this.connection) {\r\n        if (!this.drawingLine) {\r\n          return;\r\n        }\r\n        const pos = e.target.getStage().getPointerPosition();\r\n        const lastLine = this.connections[this.connections.length - 1];\r\n        lastLine.points = [\r\n          lastLine.points[0],\r\n          lastLine.points[1],\r\n          pos.x,\r\n          pos.y,\r\n        ];\r\n      }\r\n    },\r\n    handleMouseUp(e) {\r\n      if (this.connection) {\r\n        const onCircle = e.target instanceof Konva.Circle;\r\n        if (!onCircle) {\r\n          return;\r\n        }\r\n        this.drawingLine = false;\r\n        const lastLine = this.connections[this.connections.length - 1];\r\n        const indexOfPoint1 = this.list.findIndex(function (point) {\r\n          return (\r\n            point.x === lastLine.points[0] && point.y === lastLine.points[1]\r\n          );\r\n        });\r\n        const indexOfPoint2 = this.list.findIndex(function (point) {\r\n          return point.x === e.target.x() && point.y === e.target.y();\r\n        });\r\n        console.log(\"Point1 = \" + indexOfPoint1 + \" Point2 = \" + indexOfPoint2);\r\n        this.tableData[indexOfPoint1+1][indexOfPoint2+1] = 1;\r\n        this.tableData[indexOfPoint2+1][indexOfPoint1+1] = 1;\r\n        var dist = Math.sqrt(\r\n          Math.pow(e.target.x() - lastLine.points[0], 2) +\r\n            Math.pow(e.target.y() - lastLine.points[1], 2)\r\n        );\r\n        this.distances.push({\r\n          id: Date.now(),\r\n          distance: dist.toFixed(2),\r\n          x:\r\n            Math.min(e.target.x(), lastLine.points[0]) +\r\n            Math.abs(e.target.x() - lastLine.points[0]) / 2 +\r\n            4,\r\n          y:\r\n            Math.min(e.target.y(), lastLine.points[1]) +\r\n            Math.abs(e.target.y() - lastLine.points[1]) / 2 +\r\n            4,\r\n        });\r\n       \r\n        this.grid[indexOfPoint1][indexOfPoint2] = this.createNode(indexOfPoint1, indexOfPoint2, dist.toFixed(2));\r\n        this.grid[indexOfPoint2][indexOfPoint1] = this.createNode(indexOfPoint2, indexOfPoint1, dist.toFixed(2));\r\n        console.log(\"CreatedLines\");\r\n        console.log(this.grid[indexOfPoint1][indexOfPoint2]);\r\n        console.log(this.grid[indexOfPoint2][indexOfPoint1]);\r\n      \r\n        lastLine.id= \"line\"+indexOfPoint1+indexOfPoint2;\r\n        lastLine.points = [\r\n          lastLine.points[0],\r\n          lastLine.points[1],\r\n          e.target.x(),\r\n          e.target.y(),\r\n        ];\r\n       \r\n        if(this.connections.length < 2){\r\n            this.runnableGraph = true\r\n        }\r\n        console.log(\"after making lines\");\r\n     \r\n        console.log(this.grid[indexOfPoint1][indexOfPoint2]);\r\n        console.log(this.grid[indexOfPoint2][indexOfPoint1]);\r\n        console.log(this.grid);\r\n     \r\n\r\n      }\r\n     \r\n\r\n    },\r\n    next(){\r\n      if((this.visitedCount+1)<this.visitedNodesInOrder.length){\r\n        this.visitedCount += 1;\r\n        this.colorNode(this.visitedNodesInOrder[this.visitedCount], \"#ed81c4\");\r\n        console.log(\"doing next\")\r\n        console.log(this.visitedNodesInOrder[this.visitedCount]);\r\n        \r\n        //adding stack table\r\n        if(this.selectedItem ===\"BFS\"){\r\n          let item = null;\r\n          const node = this.visitedNodesInOrder[this.visitedCount];\r\n          // if(this.listNodesTo.includes(node.point1)){\r\n          //   item = this.listNodesTo.shift();\r\n          //   this.outputNodes.push(item);\r\n          // }\r\n          this.listNodesFrom.push(node.point1);\r\n          this.listNodesTo.push(node.point2);\r\n        }\r\n\r\n        if(this.selectedItem ===\"DFS\"){\r\n          let item = null;\r\n          const node = this.visitedNodesInOrder[this.visitedCount];\r\n          // if(this.listNodesTo.includes(node.point1)){\r\n          //   item = this.listNodesTo.shift();\r\n          //   this.outputNodes.push(item);\r\n          // }\r\n          this.listNodesFrom.push(node.point1);\r\n          this.listNodesTo.push(node.point2);\r\n        }\r\n\r\n        if(this.selectedItem ===\"Uniform Cost\"){\r\n          const node = this.visitedNodesInOrder[this.visitedCount];\r\n        }\r\n\r\n        if(this.selectedItem == \"A*\"){\r\n            const node = this.visitedNodesInOrder[this.visitedCount];\r\n            const myTable = document.getElementById('astartable');\r\n            // Insert a new row at the end of the table\r\n            const newRow = myTable.insertRow();\r\n\r\n            // Insert cells into the new row\r\n            const cell1 = newRow.insertCell();\r\n            const cell2 = newRow.insertCell();\r\n            const cell3 = newRow.insertCell();\r\n            const cell4 = newRow.insertCell();\r\n\r\n            // Set the content of the cells\r\n            cell1.textContent = node.point2;\r\n            cell2.textContent = (node.cost.H).toFixed(2);\r\n            cell3.textContent = (node.cost.G).toFixed(2);\r\n            cell4.textContent = (node.cost.F).toFixed(2);\r\n        }\r\n        \r\n      }\r\n      if(this.visitedCount >= 1)\r\n        this.cantPlayPrev = false;\r\n      if(this.visitedCount == this.visitedNodesInOrder.length-1){\r\n        this.cantPlayNext = true;\r\n        this.cantrunShortPath = false;\r\n      }\r\n      \r\n        \r\n      \r\n    },\r\n    prev(){\r\n      if((this.visitedCount-1) >= 0){\r\n        this.undoColorNode();\r\n        this.visitedCount -= 1;\r\n        //adding stack table\r\n        if(this.selectedItem ===\"BFS\"){\r\n          let item = null;\r\n          const node = this.visitedNodesInOrder[this.visitedCount];\r\n          // if(this.listNodesTo.includes(node.point1)){\r\n          //   item = this.listNodesTo.shift();\r\n          //   this.outputNodes.push(item);\r\n          // }\r\n          this.listNodesFrom.pop(node.point1);\r\n          this.listNodesTo.pop(node.point2);\r\n        }\r\n\r\n        if(this.selectedItem ===\"DFS\"){\r\n          let item = null;\r\n          const node = this.visitedNodesInOrder[this.visitedCount];\r\n          // if(this.listNodesTo.includes(node.point1)){\r\n          //   item = this.listNodesTo.shift();\r\n          //   this.outputNodes.pop(item);\r\n          // }\r\n          this.listNodesFrom.pop(node.point1);\r\n          this.listNodesTo.pop(node.point2);\r\n        }\r\n\r\n      }\r\n      if(this.visitedCount == 0)\r\n        this.cantPlayPrev = true;\r\n\r\n      if(this.visitedCount < this.visitedNodesInOrder.length-1){\r\n        this.cantPlayNext = false;\r\n        this.cantrunShortPath = true;\r\n\r\n      }\r\n    },\r\n\r\n \r\n    createHeuristic(node){\r\n       const size = this.list.length;\r\n       const endNode= this.list[node];\r\n       console.log(\"doing the end node\")\r\n       console.log(endNode);\r\n       let heuristic = [];\r\n       \r\n\r\n       for(let i =0; i < size; i++){\r\n         var dist = Math.sqrt(\r\n            Math.pow(endNode.x - this.list[i].x, 2) +\r\n              Math.pow(endNode.y - this.list[i].y, 2)\r\n          );\r\n         heuristic.push({node: i, hval: dist});\r\n       }\r\n\r\n       return heuristic;\r\n\r\n    },\r\n    initializeGrid(){\r\n      const grid = [];\r\n      for (let row = 0; row < 10; row++) {\r\n        const currentRow = [];\r\n        for (let col = 0; col < 10; col++) {\r\n          currentRow.push(this.createNode(row, col, 0));\r\n        }\r\n        grid.push(currentRow);\r\n      }\r\n      this.grid = grid;\r\n      console.log('This is the Initialized Grid');\r\n      console.log(this.grid);\r\n    },\r\n\r\n    //\r\n    createNode(x, y, dist){\r\n      return {\r\n        point1: x,\r\n        point2: y,\r\n        distance: dist,\r\n        isVisited: false,\r\n        previousNode: null,\r\n        cost: {\r\n                F: Infinity,\r\n                G: Infinity,\r\n                H: Infinity,\r\n            },\r\n      }\r\n\r\n    },\r\n    \r\n    animateAlgorithm(visitedNodesInOrder, nodesInShortestPathOrder) {\r\n      \r\n      \r\n      for (let i = 1; i < visitedNodesInOrder.length; i++) {\r\n        \r\n          setTimeout(() => {\r\n                this.colorNode(visitedNodesInOrder[i], \"#ed81c4\");\r\n          }, i*800);\r\n         \r\n\r\n        }\r\n        setTimeout(() => {\r\n                this.animateShortestPath(nodesInShortestPathOrder);\r\n        }, visitedNodesInOrder.length*800);\r\n        \r\n    },\r\n\r\n  colorNode(visitedNode, color){\r\n          let stage = this.theStage;\r\n\r\n          var connections = this.connections;\r\n          const node = visitedNode;\r\n\r\n          var idCircle = \"#circle\"+node.point2;\r\n          console.log(idCircle);\r\n          var shape = stage.findOne(idCircle);\r\n          \r\n\r\n          \r\n          var idLine = \"line\"+node.point1+node.point2;\r\n          var idLine2 = \"line\"+node.point2+node.point1;\r\n          let idL =connections.filter(line => line.id === idLine|| line.id === idLine2);\r\n\r\n        \r\n          var idOfLine = \"#\"+idL[0].id;\r\n          var line = stage.findOne(idOfLine);\r\n\r\n        \r\n          var tweenLine = new Konva.Tween({\r\n              node: line,\r\n              \r\n              fill:color,\r\n              stroke:color\r\n          }).play();\r\n          console.log(\"Line is working\");\r\n          \r\n          var tweenShape = new Konva.Tween({\r\n            node: shape,\r\n        \r\n            fill:color,\r\n            stroke:color\r\n          }).play();\r\n         \r\n         console.log(\"Shape is working\");\r\n  },\r\n\r\n  undoColorNode( color){\r\n          let stage = this.theStage;\r\n          \r\n          // let prevNode = this.visitedNodesInOrder[this.visitedCount-1]\r\n          let visitedNode = this.visitedNodesInOrder[this.visitedCount]\r\n         \r\n\r\n          \r\n          var connections = this.connections;\r\n          const node = visitedNode;\r\n\r\n          var idCircle = \"#circle\"+node.point2;\r\n          console.log(idCircle);\r\n          var shape = stage.findOne(idCircle);\r\n          \r\n\r\n          \r\n          var idLine = \"line\"+node.point1+node.point2;\r\n          var idLine2 = \"line\"+node.point2+node.point1;\r\n          let idL =connections.filter(line => line.id === idLine|| line.id === idLine2);\r\n\r\n        \r\n          var idOfLine = \"#\"+idL[0].id;\r\n          var line = stage.findOne(idOfLine);\r\n\r\n        \r\n          var tweenLine = new Konva.Tween({\r\n              node: line,\r\n              stroke: 'black',\r\n          }).play();\r\n          console.log(\"Line is working\");\r\n          \r\n          var tweenShape = new Konva.Tween({\r\n            node: shape,\r\n        \r\n            fill: '#a20417',\r\n             //draggable:true,\r\n            stroke: '#a20417',\r\n          }).play();\r\n         \r\n         console.log(\"Shape is working\");\r\n        \r\n  },\r\n\r\n  animateShortestPath(nodesInShortestPathOrder) {\r\n    \r\n    for (let i = 1; i < nodesInShortestPathOrder.length; i++) {\r\n          \r\n          setTimeout(() => {\r\n                this.colorNode(nodesInShortestPathOrder[i], \"#ed4255\");\r\n          }, i*500);\r\n       \r\n    }\r\n  },\r\n  getPath(){\r\n    this.cantPlayPrev = false;\r\n    if(this.selectedItem ===\"BFS\"||this.selectedItem ===\"DFS\"){\r\n      var table = document.getElementById(\"resTable\");\r\n      // Get an array of all the td elements in the table\r\n      var tds = table.getElementsByTagName(\"td\");\r\n    }\r\n\r\n    for (let i = this.calculatedPath.length-1; i >= 1; i--) {\r\n      let node = this.calculatedPath[i];\r\n      \r\n      this.outputNodesFrom.push(node.point1);\r\n      this.outputNodesTo.push(node.point2);\r\n\r\n      if(this.selectedItem ===\"BFS\"){\r\n        let resIndex = this.listNodesFrom.indexOf(node.point1)+1;\r\n        table.rows[0].cells[resIndex].style.backgroundColor = \"#ed4255\";\r\n        table.rows[1].cells[resIndex].style.backgroundColor = \"#ed4255\";\r\n      }\r\n      if(this.selectedItem ===\"DFS\"){\r\n        let resIndex = this.listNodesTo.indexOf(node.point2)+1;\r\n        table.rows[0].cells[resIndex].style.backgroundColor = \"#ed4255\";\r\n        table.rows[1].cells[resIndex].style.backgroundColor = \"#ed4255\";\r\n      }\r\n       \r\n    }\r\n\r\n    for (let i = this.calculatedPath.length-1; i >= 1; i--) {\r\n          \r\n          setTimeout(() => {\r\n                this.colorNode(this.calculatedPath[i], \"#ed4255\");\r\n          }, i*500);\r\n       \r\n    }\r\n  },\r\n    visualizeBFS(){\r\n       const STARTNODE = this.grid[this.startNode][this.startNode];\r\n       const GOALNODE = this.goalNode;\r\n       const size = this.list.length;\r\n       return bfs(this.grid, STARTNODE, GOALNODE, size);\r\n       \r\n      \r\n    },\r\n    visualizeDFS(){\r\n       const STARTNODE = this.grid[this.startNode][this.startNode];\r\n       const GOALNODE = this.goalNode;\r\n       const size = this.list.length;\r\n       return dfs(this.grid, STARTNODE, GOALNODE, size);\r\n      \r\n      \r\n    },\r\n    visualizeAStar(){\r\n       const STARTNODE = this.grid[this.startNode][this.startNode];\r\n       const GOALNODE = this.goalNode;\r\n       const size = this.list.length;\r\n       const heuristic = this.createHeuristic(GOALNODE);\r\n       console.log(\"the heuristic chuchu\")\r\n       console.log(heuristic)\r\n\r\n      const myDiv = document.getElementById('astar');\r\n\r\n        // Create a new table element\r\n      const myTable = document.createElement('table');\r\n\r\n      // Create a header row\r\n      const headerRow = myTable.insertRow();\r\n      const headerCell1 = headerRow.insertCell();\r\n      const headerCell2 = headerRow.insertCell();\r\n      headerCell1.textContent = 'Nodes #';\r\n      headerCell2.textContent = 'Heuristic';\r\n\r\n\r\n      for (const item of heuristic) {\r\n        const row = myTable.insertRow();\r\n        const cell1 = row.insertCell();\r\n        const cell2 = row.insertCell();\r\n        cell1.textContent = item.node;\r\n        cell2.textContent = item.hval;\r\n      \r\n\r\n      }\r\n\r\n      // Append the table element to the div\r\n      myDiv.appendChild(myTable);\r\n\r\n      const otherTable = document.createElement('table');\r\n      // Create a header row\r\n      const headerRowo = otherTable.insertRow();\r\n      const headerCell1o = headerRowo.insertCell();\r\n      const headerCell2o = headerRowo.insertCell();\r\n      const headerCell3o = headerRowo.insertCell();\r\n      const headerCell4o = headerRowo.insertCell();\r\n      headerCell1o.textContent = 'Nodes #';\r\n      headerCell2o.textContent = 'H cost';\r\n      headerCell3o.textContent = 'G cost';\r\n      headerCell4o.textContent = 'F cost (H+G)';\r\n\r\n      otherTable.id = 'astartable';\r\n      otherTable.style.marginTop = '10px';\r\n\r\n      myDiv.appendChild(otherTable);\r\n\r\n       return astar(this.grid, STARTNODE, GOALNODE, size, heuristic );\r\n\r\n    },\r\n    visualizeGreedyBFS(){\r\n       const STARTNODE = this.grid[this.startNode][this.startNode];\r\n       const GOALNODE = this.goalNode;\r\n       const size = this.list.length;\r\n       const heuristic = this.createHeuristic(GOALNODE);\r\n\r\n\r\n       console.log(\"the heuristic chuchu\")\r\n       console.log(heuristic)\r\n\r\n      const myDiv = document.getElementById('heuristic');\r\n\r\n        // Create a new table element\r\n      const myTable = document.createElement('table');\r\n\r\n      // Create a header row\r\n      const headerRow = myTable.insertRow();\r\n      const headerCell1 = headerRow.insertCell();\r\n      const headerCell2 = headerRow.insertCell();\r\n      headerCell1.textContent = 'Nodes #';\r\n      headerCell2.textContent = 'Heuristic';\r\n\r\n\r\n      for (const item of heuristic) {\r\n        const row = myTable.insertRow();\r\n        const cell1 = row.insertCell();\r\n        const cell2 = row.insertCell();\r\n        cell1.textContent = item.node;\r\n        cell1.style.border = '1px solid gray';\r\n        cell2.textContent = item.hval;\r\n        cell2.style.border = '1px solid gray';\r\n        cell2.style.padding = '3px';\r\n\r\n      }\r\n\r\n      // Append the table element to the div\r\n      myDiv.appendChild(myTable);\r\n\r\n      return greedyBFS(this.grid, STARTNODE, GOALNODE, size, heuristic );\r\n      \r\n    },\r\n    visualizeUniformCost(){\r\n       const STARTNODE = this.grid[this.startNode][this.startNode];\r\n       const GOALNODE = this.goalNode;\r\n       const size = this.list.length;\r\n       const heuristic = this.createHeuristic(GOALNODE);\r\n       return uniformCost(this.grid, STARTNODE, GOALNODE, size, heuristic );\r\n \r\n    },\r\n  \r\n    runGraph(){\r\n       \r\n       if(this.runnableGraph && this.selectedItem.trim()!==\"Algorithms\") {\r\n          \r\n          const item = this.selectedItem;\r\n          if(item === \"BFS\"){\r\n            [this.visitedNodesInOrder, this.calculatedPath] = this.visualizeBFS();\r\n          }\r\n          else if(item === \"DFS\"){\r\n            [this.visitedNodesInOrder, this.calculatedPath] = this.visualizeDFS();\r\n          }\r\n          else if (item === \"A*\"){\r\n            [this.visitedNodesInOrder, this.calculatedPath] =this.visualizeAStar();\r\n          }\r\n          else if (item === \"Greedy BFS\"){\r\n            [this.visitedNodesInOrder, this.calculatedPath] = this.visualizeGreedyBFS();\r\n          }\r\n          else if (item === \"Uniform Cost\"){\r\n            [this.visitedNodesInOrder, this.calculatedPath] = this.visualizeUniformCost();\r\n          }\r\n\r\n          // this.animateAlgorithm(this.visitedNodesInOrder, this.calculatedPath);\r\n          console.log(\"this is in run graphe\");\r\n          console.log(this.visitedNodesInOrder)\r\n          console.log(this.calculatedPath)\r\n          this.cantPlayNext = false;\r\n\r\n       }\r\n    },\r\n\r\n  }\r\n\r\n}\r\n</script>"]}]}